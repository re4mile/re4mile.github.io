<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="https://s1.ax1x.com/2023/01/03/pSip2aF.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://s1.ax1x.com/2023/01/03/pSip2aF.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://s1.ax1x.com/2023/01/03/pSip2aF.png">
  <link rel="mask-icon" href="https://s1.ax1x.com/2023/01/03/pSip2aF.png" color="#222">

<link rel="stylesheet" href="/re4mile.github.io/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha256-Z1K5uhUaJXA7Ll0XrZ/0JhX4lAtZFpT6jkKrEDT0drU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"github.com","root":"/re4mile.github.io/","images":"/re4mile.github.io/images","scheme":"Pisces","darkmode":true,"version":"8.14.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":10},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/re4mile.github.io/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/re4mile.github.io/js/config.js"></script>

    <meta name="description" content="an ordinary people">
<meta property="og:type" content="website">
<meta property="og:title" content="实践是检验真理的唯一标准">
<meta property="og:url" content="https://github.com/re4mile/re4mile.github.io/page/2/index.html">
<meta property="og:site_name" content="实践是检验真理的唯一标准">
<meta property="og:description" content="an ordinary people">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="re4mile(邓渠香)">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://github.com/re4mile/re4mile.github.io/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>实践是检验真理的唯一标准</title>
  








  <noscript>
    <link rel="stylesheet" href="/re4mile.github.io/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/re4mile.github.io/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">实践是检验真理的唯一标准</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">好记性不如烂笔头</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/re4mile.github.io/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/re4mile.github.io/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/re4mile.github.io/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/re4mile.github.io/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="re4mile(邓渠香)"
      src="https://s1.ax1x.com/2023/01/10/pSefBp6.jpg">
  <p class="site-author-name" itemprop="name">re4mile(邓渠香)</p>
  <div class="site-description" itemprop="description">an ordinary people</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/re4mile.github.io/archives/">
          <span class="site-state-item-count">31</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/re4mile.github.io/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/re4mile.github.io/tags/">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://re4mile.gitee.io/" title="Gitee → https:&#x2F;&#x2F;re4mile.gitee.io" rel="noopener me" target="_blank"><i class="fa fa-subway fa-fw"></i>Gitee</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.cnblogs.com/re4mile/" title="cnblog → https:&#x2F;&#x2F;www.cnblogs.com&#x2F;re4mile&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-space-shuttle fa-fw"></i>cnblog</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/re4mile/re4mile.github.io/2023/01/11/language/%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/C/language/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://s1.ax1x.com/2023/01/10/pSefBp6.jpg">
      <meta itemprop="name" content="re4mile(邓渠香)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="实践是检验真理的唯一标准">
      <meta itemprop="description" content="an ordinary people">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 实践是检验真理的唯一标准">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/re4mile.github.io/2023/01/11/language/%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/C/language/" class="post-title-link" itemprop="url">C文件处理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-11 22:41:23" itemprop="dateCreated datePublished" datetime="2023-01-11T22:41:23+08:00">2023-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-01-07 08:03:28" itemprop="dateModified" datetime="2023-01-07T08:03:28+08:00">2023-01-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/re4mile.github.io/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="文件示例"><a href="#文件示例" class="headerlink" title="文件示例"></a>文件示例</h1><h2 id="文件末尾"><a href="#文件末尾" class="headerlink" title="文件末尾"></a>文件末尾</h2><p>由于字符的ASCII码不可能出现 -1, 因此EOF定义为 -1 是合适的</p>
<p>当以文本形式读取文件内容, 读入的字符值等于EOF时, 表示读入的已不是正常的字符而是文件结束符</p>
<p>当以二进制形式读取文件内容, 信息都是以数值方式存在的, EOF的值可能就是所要处理的二进制文件中的信息, 此时需要用 feof() 来判断是否到达了文件结尾</p>
<p>即EOF可以作为文本文件的结束标志, 但不能作为二进制文件的结束符, feof函数既可以判断二进制文件, 又可以判断文本文件</p>
<p>文本方式在读文件时, 会将换行符号CRLF(0x0D 0x0A)全部转换成单个的0x0A, 并且当遇到结束符CTRLZ(0x1A)时, 就认为文件已经结束, </p>
<p>相应的, 写文件时, 会将所有的0x0A换成0x0D0x0A,</p>
<p> 所以, 若使用文本方式打开二进制文件时, 就很容易出现文件读不完整, 或內容不对的错误, 即使是用文本方式打开文本文件, </p>
<p>也要谨慎使用, 比如复制文件, 就不应该使用文本方式</p>
<p>Linux下带不带 “b” 是相同的</p>
<h2 id="获取文件大小"><a href="#获取文件大小" class="headerlink" title="获取文件大小"></a>获取文件大小</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">ReadFileSize</span><span class="params">(<span class="type">char</span>* filename)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> size = <span class="number">0</span>;</span><br><span class="line">	FILE* fp = fopen(filename, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (!fp)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;wrong open\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	fseek(fp, <span class="number">0L</span>, SEEK_END);</span><br><span class="line">	size = ftell(fp);</span><br><span class="line">	fclose(fp);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="修改文件名字"><a href="#修改文件名字" class="headerlink" title="修改文件名字"></a>修改文件名字</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;windows.h&gt;</span> </span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//way1</span></span><br><span class="line">	rename(<span class="string">&quot;tmp.js&quot;</span>,<span class="string">&quot;tmp.exe&quot;</span>); </span><br><span class="line">	ShellExecute(<span class="literal">NULL</span>, <span class="string">&quot;open&quot;</span>, <span class="string">&quot;tmp.exe&quot;</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, SW_SHOWNORMAL); </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	//way2</span></span><br><span class="line"><span class="comment">	char cmd[]=&quot;ren  help.server tmp.exe&quot;;</span></span><br><span class="line"><span class="comment">	system(cmd);</span></span><br><span class="line"><span class="comment">	ShellExecute(NULL, &quot;open&quot;, &quot;tmp.exe&quot;, NULL, NULL, SW_SHOWNORMAL); </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>



<h1 id="目录示例"><a href="#目录示例" class="headerlink" title="目录示例"></a>目录示例</h1><h2 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;io.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;direct.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> filename[<span class="number">128</span>] = <span class="string">&quot;F:/linux/syscall&quot;</span>;<span class="comment">//50</span></span><br><span class="line">	<span class="keyword">if</span> (_access(filename, <span class="number">0</span>) == <span class="number">-1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		_mkdir(filename);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;mkdir wrong %s\n&quot;</span>, filename);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中,</p>
<p><code>_access</code>用于监测,该文件是否存在</p>
<p><code>_mkdir</code>用于创建文件</p>
<p>值得注意的是,<code>_mkdir</code>一次调用只能创建一个文件夹,也就是不能递归创建,只能多次调用</p>
<p>下面是我创建文件夹,然后往文件夹里面创建文件的一个操作</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;io.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;direct.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> errorCode = <span class="number">0</span>;</span><br><span class="line">	FILE* fp = <span class="number">0</span>;</span><br><span class="line">	<span class="type">char</span> filename[<span class="number">128</span>] = <span class="string">&quot;F:/5008/Note/re4mile/source/_posts/linux/syscall/中断详讲&quot;</span>;<span class="comment">//50</span></span><br><span class="line">	<span class="type">char</span> tmp[<span class="number">64</span>];</span><br><span class="line">	<span class="keyword">if</span> (_access(filename, <span class="number">0</span>) == <span class="number">-1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		_mkdir(filename);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;mkdir wrong %s\n&quot;</span>, filename);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">400</span>; i += <span class="number">16</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">memset</span>(tmp, <span class="number">0</span>, <span class="number">64</span>);</span><br><span class="line">		<span class="built_in">memset</span>(filename + <span class="number">57</span>, <span class="number">0</span>, <span class="number">64</span>);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">sprintf</span>(tmp, <span class="string">&quot;/%03d-%03d&quot;</span>, i, i + <span class="number">15</span>);<span class="comment">//要创建的文件夹</span></span><br><span class="line">		<span class="built_in">strcat</span>(filename, tmp);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (_access(filename, <span class="number">0</span>) == <span class="number">-1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			_mkdir(filename);<span class="comment">//然后创建文件夹</span></span><br><span class="line">			<span class="comment">//打开那个文件夹.在里面创建文件</span></span><br><span class="line">			<span class="built_in">strcat</span>(filename, <span class="string">&quot;/linux.md&quot;</span>);</span><br><span class="line">			fp = fopen(filename, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">			<span class="keyword">if</span> (fp != <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				fclose(fp);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;%s yes\n&quot;</span>, filename);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;%s no\n&quot;</span>, filename);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;mkdir wrong %s\n&quot;</span>,filename);</span><br><span class="line">		&#125;</span><br><span class="line">	</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="一级目录扫描"><a href="#一级目录扫描" class="headerlink" title="一级目录扫描"></a>一级目录扫描</h2><p>参考链接</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_24662747/article/details/80669627">qq_24662747</a></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;io.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span>  <span class="title function_">printDir</span><span class="params">(<span class="type">const</span>  <span class="type">char</span>* path)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span>   nRet = <span class="number">0</span>;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span>  _<span class="title">finddata_t</span>  <span class="title">data</span>;</span></span><br><span class="line">    <span class="type">int</span>  hnd = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    hnd= _findfirst(path, &amp;data);     <span class="comment">// 查找文件名与正则表达式chRE的匹配第一个文件</span></span><br><span class="line">    <span class="keyword">if</span> (hnd &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        perror(path);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    nRet = (hnd &lt; <span class="number">0</span>) ? <span class="number">-1</span> : <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (nRet &gt;= <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (data.attrib == _A_SUBDIR)   <span class="comment">// 如果是目录</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;d:%s\n&quot;</span>, data.name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;f:%s\n&quot;</span>, data.name);</span><br><span class="line">        &#125;</span><br><span class="line">        nRet = _findnext(hnd, &amp;data);</span><br><span class="line">    &#125;</span><br><span class="line">    _findclose(hnd);      <span class="comment">// 关闭当前句柄</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span>  <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    printDir(<span class="string">&quot;d:/*.*&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="未命名"><a href="#未命名" class="headerlink" title="未命名"></a>未命名</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;io.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">// 功  能 : 打印目录path中与模式chRE匹配的所有文件明</span></span><br><span class="line"><span class="comment">// 输  入 : path - 待打印的目录</span></span><br><span class="line"><span class="comment">//          chRE - 要求匹配的正则表达式</span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">printDir</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* path, <span class="type">const</span> <span class="type">char</span>* chRE)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span>* chCurPath = getcwd(<span class="literal">NULL</span>, <span class="number">0</span>);              <span class="comment">// 当前工作目录</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;current work path: %s\n&quot;</span>, chCurPath);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> ret = _chdir(path);</span><br><span class="line">	<span class="keyword">if</span> (ret &lt; <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(path);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="type">char</span>* newPath = getcwd(<span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;new work path: %s\n&quot;</span>, newPath);</span><br><span class="line">	<span class="built_in">free</span>(newPath);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> _<span class="title">finddata_t</span> <span class="title">data</span>;</span></span><br><span class="line">	<span class="type">long</span> hnd = _findfirst(chRE, &amp;data);    <span class="comment">// 查找文件名与正则表达式chRE的匹配第一个文件</span></span><br><span class="line">	<span class="comment">// 返回唯一的搜索句柄</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (hnd &lt; <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		perror(chRE);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span>  nRet = (hnd &lt; <span class="number">0</span>) ? <span class="number">-1</span> : <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (nRet &gt;= <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (data.attrib == _A_SUBDIR)  <span class="comment">// 如果是目录</span></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;   [%s]*\n&quot;</span>, data.name);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;   [%s]\n&quot;</span>, data.name);</span><br><span class="line"></span><br><span class="line">		nRet = _findnext(hnd, &amp;data);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	_findclose(hnd);     <span class="comment">// 关闭当前句柄</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	chdir(chCurPath);         <span class="comment">// 切换回之前的工作目录</span></span><br><span class="line">	<span class="built_in">free</span>(chCurPath);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="函数-API"><a href="#函数-API" class="headerlink" title="函数| API"></a>函数| API</h1><h2 id="文件处理"><a href="#文件处理" class="headerlink" title="文件处理"></a>文件处理</h2><h3 id="增"><a href="#增" class="headerlink" title="增"></a>增</h3><h4 id="setbuf"><a href="#setbuf" class="headerlink" title="setbuf"></a>setbuf</h4><p>读取文本到缓冲区</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void setbuf(FILE *stream, char *buffer)</span><br></pre></td></tr></table></figure>

<p>参数 </p>
<p>FILE *stream,  一个流</p>
<p>char *buffer 一个缓冲区</p>
<p>功能 </p>
<p>把指向流的数据显缓冲在缓冲区,然后通过fflush送到流</p>
<p>返回值</p>
<p>注意事项</p>
<p><strong>buffer</strong> – 这是分配给用户的缓冲，它的长度至少为 BUFSIZ 字节，BUFSIZ 是一个宏常量，表示数组的长度 </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> buf[BUFSIZ];</span><br><span class="line">setbuf(<span class="built_in">stdout</span>, buf);</span><br></pre></td></tr></table></figure>



<p>例子</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> buff[BUFSIZ];</span><br><span class="line">	<span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">	setbuf(<span class="built_in">stdout</span>, buff);</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">puts</span>(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">	<span class="built_in">puts</span>(<span class="string">&quot;456&quot;</span>);</span><br><span class="line">	fflush(<span class="built_in">stdout</span>);</span><br><span class="line">	<span class="built_in">puts</span>(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出的语句会被送达缓冲区</p>
<p>0x31,0x32,0x33,0xa,0x34,0x35,0x36,0xa,</p>
<p>然后fflush把缓冲区的数据送到流stdout</p>
<h4 id="setvbuf"><a href="#setvbuf" class="headerlink" title="setvbuf"></a>setvbuf</h4><p>相比较setbuf,它多了模式mode可言</p>
<p>C 库函数 <strong>int setvbuf(FILE *stream, char *buffer, int mode, size_t size)</strong> 定义流 stream 应如何缓冲。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">setvbuf</span><span class="params">(FILE *stream, <span class="type">char</span> *buffer, <span class="type">int</span> mode, <span class="type">size_t</span> size)</span></span><br></pre></td></tr></table></figure>





<p>参数</p>
<ul>
<li><strong>stream</strong> – 这是指向 FILE 对象的指针，该 FILE 对象标识了一个打开的流。</li>
<li><strong>buffer</strong> – 这是分配给用户的缓冲。如果设置为 NULL，该函数会自动分配一个指定大小的缓冲。</li>
<li><strong>mode</strong> – 这指定了文件缓冲的模式：</li>
</ul>
<p>关于mode</p>
<table>
<thead>
<tr>
<th align="left">模式</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">_IOFBF</td>
<td align="left"><strong>全缓冲</strong>：对于输出，数据在缓冲填满时被一次性写入。对于输入，缓冲会在请求输入且缓冲为空时被填充。</td>
</tr>
<tr>
<td align="left">_IOLBF</td>
<td align="left"><strong>行缓冲</strong>：对于输出，数据在遇到换行符或者在缓冲填满时被写入，具体视情况而定。对于输入，缓冲会在请求输入且缓冲为空时被填充，直到遇到下一个换行符。</td>
</tr>
<tr>
<td align="left">_IONBF</td>
<td align="left"><strong>无缓冲</strong>：不使用缓冲。每个 I&#x2F;O 操作都被即时写入。buffer 和 size 参数被忽略。</td>
</tr>
</tbody></table>
<ul>
<li><strong>size</strong> –这是缓冲的大小，以字节为单位。</li>
</ul>
<p>功能</p>
<p>返回值</p>
<p>如果成功，则该函数返回 0，否则返回非零值。</p>
<p>和setbuf没太多的区别</p>
<h4 id="tmpfile"><a href="#tmpfile" class="headerlink" title="tmpfile"></a>tmpfile</h4><p>创建临时文件</p>
<p>以二进制更新模式(wb+)创建临时文件</p>
<p>流关闭的时候或者在程序终止的时候自动删除。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span> <span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   FILE *fp;</span><br><span class="line"></span><br><span class="line">   fp = tmpfile();</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;临时文件被创建\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* 您可以在这里使用临时文件</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">   ...</span></span><br><span class="line"><span class="comment">   ...</span></span><br><span class="line"><span class="comment">   ...</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">   fclose(fp);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="tmpnam"><a href="#tmpnam" class="headerlink" title="tmpnam"></a>tmpnam</h4><p>返回临时文件名字的指针</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> *<span class="title function_">tmpnam</span><span class="params">(<span class="type">char</span> *arr)</span></span><br></pre></td></tr></table></figure>



<p>返回一个指向字符串arr的指针</p>
<p><code>arr</code>是一个字符串数组</p>
<p>参数<code>arr</code>也可以为<code>NULL</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span>* ptr;</span><br><span class="line">	<span class="type">char</span> buffer[L_tmpnam];</span><br><span class="line">	<span class="comment">//L_tmpnam = 16</span></span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//库函数被调用1次 [0]</span></span><br><span class="line">	ptr=tmpnam(buffer);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;临时名称 : %s\n&quot;</span>, buffer);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;临时名称 : %s\n&quot;</span>, ptr);</span><br><span class="line">	<span class="comment">//库函数被调用2次 [1]</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;临时名称 : %s\n&quot;</span>, tmpnam(<span class="literal">NULL</span>));</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









<h3 id="删"><a href="#删" class="headerlink" title="删"></a>删</h3><h4 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h4><p>永久删除文件</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">remove</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *filename)</span><span class="comment">//里面是一个字符串罢了</span></span><br></pre></td></tr></table></figure>



<p>删除如果成功，则返回零。</p>
<p>如果错误，则返回 -1，并设置 errno。</p>
<p>另外垃圾桶找不到文件了,可以说真的删除找不到了</p>
<h4 id="clearerr"><a href="#clearerr" class="headerlink" title="clearerr"></a>clearerr</h4><p>文件错误的清理</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">clearerr</span><span class="params">(FILE *file_ptr)</span></span><br></pre></td></tr></table></figure>

<p>清除文件发生的错误</p>
<h3 id="改"><a href="#改" class="headerlink" title="改"></a>改</h3><h4 id="rename"><a href="#rename" class="headerlink" title="rename"></a>rename</h4><p> 重命名文件的名字</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">rename</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *old_filename, <span class="type">const</span> <span class="type">char</span> *new_filename)</span></span><br></pre></td></tr></table></figure>

<p>const char *old_filename: 原来文件的名字</p>
<p>const char *new_filename: 新的文件名字</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span> <span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">int</span> ret;</span><br><span class="line">   <span class="type">char</span> oldname[] = <span class="string">&quot;d:/file.txt&quot;</span>;</span><br><span class="line">   <span class="type">char</span> newname[] = <span class="string">&quot;d:/dqx.txt&quot;</span>;</span><br><span class="line">   </span><br><span class="line">   ret = rename(oldname, newname);</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">if</span>(ret == <span class="number">0</span>) </span><br><span class="line">   &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;文件重命名成功&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span> </span><br><span class="line">   &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;错误：不能重命名该文件&quot;</span>);</span><br><span class="line">   &#125; </span><br><span class="line">   <span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>如果找到了”d:&#x2F;file.txt”</p>
<p>但是没有找到d:&#x2F;dqx.txt”;</p>
<p>那么源文件会被永久的删除</p>
<p>程序暂时还不会报错,正常的退出</p>
<h3 id="查"><a href="#查" class="headerlink" title="查"></a>查</h3><h4 id="ferror"><a href="#ferror" class="headerlink" title="ferror"></a>ferror</h4><p>文件获取的错误类型</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">ferror</span><span class="params">(FILE *file_ptr)</span></span><br></pre></td></tr></table></figure>



<p>返回文件发生错误的类型,</p>
<p>出错就返回非零的编号</p>
<p>没出错就返回0</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>( ferror(fp) )</span><br><span class="line">&#123;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;读取文件：file.txt 时发生错误\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="目录处理"><a href="#目录处理" class="headerlink" title="目录处理"></a>目录处理</h2><p>函数说明</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span>  _findfirst(  <span class="type">char</span>  *filespec,  <span class="keyword">struct</span>  <span class="type">_finddata_t</span>  *fileinfo );  </span><br><span class="line"><span class="comment">// 功  能 : 提供与filespec指定入口泛式匹配的第一个文件.通常后继用_findnext（）函数来完成某泛式下的文件遍历.  </span></span><br><span class="line"><span class="comment">// 头文件 : #include &lt;io.h&gt;  </span></span><br><span class="line"><span class="comment">// 参  数 : filespec - 目标文件规范,可以包含通配符  </span></span><br><span class="line"><span class="comment">//          fileinfo - 文件信息buffer  </span></span><br><span class="line"><span class="comment">// 返回值 : 成功返回唯一的搜索句柄  </span></span><br><span class="line"><span class="comment">//          出错返回-1,且设置errno为如下值:  </span></span><br><span class="line"><span class="comment">//          ENOENT 该泛式无法匹配  </span></span><br><span class="line"><span class="comment">//          EINVAL 无效文件名  </span></span><br><span class="line"><span class="type">int</span>  _findnext(  <span class="type">long</span>  handle,  <span class="keyword">struct</span>  <span class="type">_finddata_t</span>  *fileinfo );  </span><br><span class="line"><span class="comment">// 功  能 : 按照前面_findfirst中的泛式规则，查找下一个符合该泛式的文件，并以此为依据修改fileinfo中的值  </span></span><br><span class="line"><span class="comment">// 头文件 : #include &lt;io.h&gt;  </span></span><br><span class="line"><span class="comment">// 参  数 : long handle - 搜索句柄(通常由紧靠其前的_findfirst()返回)  </span></span><br><span class="line"><span class="comment">//          fileinfo    - 文件信息buffer  </span></span><br><span class="line"><span class="comment">// 返回值 : 成功返回0  </span></span><br><span class="line"><span class="comment">//          出错返回-1</span></span><br><span class="line"><span class="type">int</span>  _findclose(  <span class="type">long</span>  handle );  </span><br><span class="line"><span class="comment">// 功  能 : 关闭搜寻句柄并释放相应资源  </span></span><br><span class="line"><span class="comment">// 头文件 : #include &lt;io.h&gt;  </span></span><br><span class="line"><span class="comment">// 参  数 : long handle - 搜索句柄(通常由紧靠其前的_findfirst()返回)  </span></span><br><span class="line"><span class="comment">// 返回值 : 成功返回0  </span></span><br><span class="line"><span class="comment">//          出错返回-1</span></span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/re4mile/re4mile.github.io/2023/01/11/language/Python/%E5%9F%BA%E7%A1%80/language/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://s1.ax1x.com/2023/01/10/pSefBp6.jpg">
      <meta itemprop="name" content="re4mile(邓渠香)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="实践是检验真理的唯一标准">
      <meta itemprop="description" content="an ordinary people">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 实践是检验真理的唯一标准">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/re4mile.github.io/2023/01/11/language/Python/%E5%9F%BA%E7%A1%80/language/" class="post-title-link" itemprop="url">Python</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-11 22:41:23" itemprop="dateCreated datePublished" datetime="2023-01-11T22:41:23+08:00">2023-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-01-06 17:40:40" itemprop="dateModified" datetime="2023-01-06T17:40:40+08:00">2023-01-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/re4mile.github.io/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><p>记录一次全局变量,注意它的反汇编语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">0</span>  <span class="comment"># initialize variable a</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">coo</span>():</span><br><span class="line">    <span class="keyword">global</span> a  <span class="comment"># call a</span></span><br><span class="line">    a += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(coo())</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = []</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">coo</span>():</span><br><span class="line">    <span class="keyword">global</span> a</span><br><span class="line">    a += [<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(coo())</span><br></pre></td></tr></table></figure>



<h1 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h1><p>参考链接 <a target="_blank" rel="noopener" href="https://blog.csdn.net/python1639er/article/details/112325519">https://blog.csdn.net/python1639er/article/details/112325519</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;Li hua&quot;</span></span><br><span class="line">age = <span class="number">24</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello %s, you are %d years old&quot;</span> % (name, age))</span><br></pre></td></tr></table></figure>



<h1 id="文件处理"><a href="#文件处理" class="headerlink" title="文件处理"></a>文件处理</h1><h2 id="重定向示例"><a href="#重定向示例" class="headerlink" title="重定向示例"></a>重定向示例</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"> </span><br><span class="line">console = sys.stdout  <span class="comment"># 备份一下文件描述符  </span></span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">r&quot;.\file\data.txt&quot;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">sys.stdout = file    <span class="comment"># 把输出重定向到文件</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello\n&#x27;</span>+<span class="string">&#x27;java\n&#x27;</span>+<span class="string">&#x27;python&#x27;</span>)   <span class="comment"># 输出自然会送往文件</span></span><br><span class="line">sys.stdout = console  <span class="comment"># 恢复重定向</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">33</span>)  <span class="comment"># 向控制台打印33</span></span><br><span class="line"> </span><br><span class="line">console = sys.stdin   <span class="comment"># 备份一下文件描述符  </span></span><br><span class="line">file = <span class="built_in">open</span>(<span class="string">r&quot;F:/input.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">sys.stdin = file  <span class="comment"># 把输入重定向到文件  </span></span><br><span class="line">mod = <span class="built_in">input</span>() <span class="comment"># 一下输入均来自文件</span></span><br><span class="line">src = <span class="built_in">input</span>()</span><br><span class="line">des = <span class="built_in">input</span>()</span><br><span class="line">size= <span class="built_in">input</span>()</span><br><span class="line">file.close() <span class="comment"># 关闭文件</span></span><br><span class="line">sys.stdin = console  <span class="comment"># 恢复重定向</span></span><br><span class="line"><span class="built_in">print</span>(mod) <span class="comment"># 打印到控制台</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(src,<span class="number">16</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(des,<span class="number">16</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(size,<span class="number">10</span>))</span><br></pre></td></tr></table></figure>



<h2 id="读取文件的二进制数据"><a href="#读取文件的二进制数据" class="headerlink" title="读取文件的二进制数据"></a>读取文件的二进制数据</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 加载测试数据</span></span><br><span class="line">fpath=<span class="string">&#x27;./data.bin&#x27;</span></span><br><span class="line">f = <span class="built_in">open</span>(fpath,<span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">nums=<span class="built_in">int</span>(os.path.getsize(fpath)/<span class="number">4</span>) <span class="comment"># 4 是浮点数字节</span></span><br><span class="line">data = struct.unpack(<span class="string">&#x27;f&#x27;</span>*nums,f.read(<span class="number">4</span>*nums))  <span class="comment">#注意一次只能读取一次，直接再读取会报错</span></span><br><span class="line">f.close()</span><br><span class="line">data =  np.array(data).reshape(-<span class="number">1</span>)</span><br></pre></td></tr></table></figure>



<h1 id="强制转化"><a href="#强制转化" class="headerlink" title="强制转化"></a>强制转化</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">· int(x)             将x转换为一个整数</span><br><span class="line">· float(x)           将x转换到一个浮点数</span><br><span class="line">· str(x)             将对象 x 转换为字符串</span><br><span class="line">· tuple(s)           将序列 s 转换为一个元组</span><br><span class="line">· list(s)            将序列 s 转换为一个列表</span><br><span class="line">· set(s)             将序列 s 转换为一个集合</span><br><span class="line"></span><br><span class="line">int(x [,base]) ⇒ 将x转换为一个十进制的整数</span><br><span class="line">long(x [,base]) ⇒ 将x转换为一个十进制的长整数</span><br><span class="line">float(x) ⇒ 将x转换为一个浮点数</span><br><span class="line">str(object) ⇒ 转换为字符串</span><br><span class="line">repr(object) ⇒ 转换为表达式字符串</span><br><span class="line">eval(str) ⇒ 用来计算在字符串中的有效Python表达式,并返回一个对象</span><br><span class="line">tuple(seq) ⇒ 将序列seq转换为一个元组</span><br><span class="line">list(seq) ⇒ 将序列seq转换为一个列表</span><br><span class="line">chr(x ) ⇒ 将一个整数转换为一个字符</span><br><span class="line">unichr(x ) ⇒ 将一个整数转换为Unicode字符</span><br><span class="line">ord(x ) ⇒ 将一个字符转换为它的整数值</span><br><span class="line">hex(x ) ⇒ 将一个整数转换为一个十六进制字符串</span><br><span class="line">oct(x ) ⇒ 将一个整数转换为一个八进制字符串</span><br></pre></td></tr></table></figure>

<h1 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h1><h3 id="struct"><a href="#struct" class="headerlink" title="struct"></a>struct</h3><p>参考链接</p>
<p><a target="_blank" rel="noopener" href="https://www.cxybb.com/article/qq_43679818/86574114">https://www.cxybb.com/article/qq_43679818/86574114</a></p>
<p>struct 类型表</p>
<table>
<thead>
<tr>
<th align="left">Format</th>
<th align="left">C Type</th>
<th align="left">Python type</th>
<th align="left">Standard size</th>
<th align="left">Notes</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>x</code></td>
<td align="left">pad byte</td>
<td align="left">no value</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>c</code></td>
<td align="left"><code>char</code></td>
<td align="left">string of length 1</td>
<td align="left">1</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>b</code></td>
<td align="left"><code>signed char</code></td>
<td align="left">integer</td>
<td align="left">1</td>
<td align="left">(3)</td>
</tr>
<tr>
<td align="left"><code>B</code></td>
<td align="left"><code>unsigned char</code></td>
<td align="left">integer</td>
<td align="left">1</td>
<td align="left">(3)</td>
</tr>
<tr>
<td align="left"><code>?</code></td>
<td align="left"><code>_Bool</code></td>
<td align="left">bool</td>
<td align="left">1</td>
<td align="left">(1)</td>
</tr>
<tr>
<td align="left"><code>h</code></td>
<td align="left"><code>short</code></td>
<td align="left">integer</td>
<td align="left">2</td>
<td align="left">(3)</td>
</tr>
<tr>
<td align="left"><code>H</code></td>
<td align="left"><code>unsigned short</code></td>
<td align="left">integer</td>
<td align="left">2</td>
<td align="left">(3)</td>
</tr>
<tr>
<td align="left"><code>i</code></td>
<td align="left"><code>int</code></td>
<td align="left">integer</td>
<td align="left">4</td>
<td align="left">(3)</td>
</tr>
<tr>
<td align="left"><code>I</code></td>
<td align="left"><code>unsigned int</code></td>
<td align="left">integer</td>
<td align="left">4</td>
<td align="left">(3)</td>
</tr>
<tr>
<td align="left"><code>l</code></td>
<td align="left"><code>long</code></td>
<td align="left">integer</td>
<td align="left">4</td>
<td align="left">(3)</td>
</tr>
<tr>
<td align="left"><code>L</code></td>
<td align="left"><code>unsigned long</code></td>
<td align="left">integer</td>
<td align="left">4</td>
<td align="left">(3)</td>
</tr>
<tr>
<td align="left"><code>q</code></td>
<td align="left"><code>long long</code></td>
<td align="left">integer</td>
<td align="left">8</td>
<td align="left">(2), (3)</td>
</tr>
<tr>
<td align="left"><code>Q</code></td>
<td align="left"><code>unsigned long long</code></td>
<td align="left">integer</td>
<td align="left">8</td>
<td align="left">(2), (3)</td>
</tr>
<tr>
<td align="left"><code>f</code></td>
<td align="left"><code>float</code></td>
<td align="left">float</td>
<td align="left">4</td>
<td align="left">(4)</td>
</tr>
<tr>
<td align="left"><code>d</code></td>
<td align="left"><code>double</code></td>
<td align="left">float</td>
<td align="left">8</td>
<td align="left">(4)</td>
</tr>
<tr>
<td align="left"><code>s</code></td>
<td align="left"><code>char[]</code></td>
<td align="left">string</td>
<td align="left">1</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>p</code></td>
<td align="left"><code>char[]</code></td>
<td align="left">string</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><code>P</code></td>
<td align="left"><code>void *</code></td>
<td align="left">integer</td>
<td align="left"></td>
<td align="left">(5), (3)</td>
</tr>
</tbody></table>
<h4 id="struct-pack"><a href="#struct-pack" class="headerlink" title="struct.pack"></a>struct.pack</h4><h4 id="struct-unpack"><a href="#struct-unpack" class="headerlink" title="struct.unpack"></a>struct.unpack</h4><h4 id="struct-calcsize"><a href="#struct-calcsize" class="headerlink" title="struct.calcsize"></a>struct.calcsize</h4><h4 id="struct-pack-into"><a href="#struct-pack-into" class="headerlink" title="struct.pack_into"></a>struct.pack_into</h4><h4 id="struct-unpack-from"><a href="#struct-unpack-from" class="headerlink" title="struct.unpack_from"></a>struct.unpack_from</h4>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/re4mile/re4mile.github.io/2023/01/11/language/Cpp/%E5%9F%BA%E7%A1%80/language/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://s1.ax1x.com/2023/01/10/pSefBp6.jpg">
      <meta itemprop="name" content="re4mile(邓渠香)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="实践是检验真理的唯一标准">
      <meta itemprop="description" content="an ordinary people">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 实践是检验真理的唯一标准">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/re4mile.github.io/2023/01/11/language/Cpp/%E5%9F%BA%E7%A1%80/language/" class="post-title-link" itemprop="url">C++</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-11 22:41:23" itemprop="dateCreated datePublished" datetime="2023-01-11T22:41:23+08:00">2023-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-01-07 10:36:05" itemprop="dateModified" datetime="2023-01-07T10:36:05+08:00">2023-01-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/re4mile.github.io/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/re4mile/re4mile.github.io/2023/01/11/language/C/%E6%9C%89%E8%B6%A3%E7%9A%84C%E8%AF%AD%E8%A8%80/language/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://s1.ax1x.com/2023/01/10/pSefBp6.jpg">
      <meta itemprop="name" content="re4mile(邓渠香)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="实践是检验真理的唯一标准">
      <meta itemprop="description" content="an ordinary people">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 实践是检验真理的唯一标准">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/re4mile.github.io/2023/01/11/language/C/%E6%9C%89%E8%B6%A3%E7%9A%84C%E8%AF%AD%E8%A8%80/language/" class="post-title-link" itemprop="url">有趣的C语言</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-11 22:41:23" itemprop="dateCreated datePublished" datetime="2023-01-11T22:41:23+08:00">2023-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-01-07 10:36:05" itemprop="dateModified" datetime="2023-01-07T10:36:05+08:00">2023-01-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/re4mile.github.io/categories/language/" itemprop="url" rel="index"><span itemprop="name">language</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="音乐播放"><a href="#音乐播放" class="headerlink" title="音乐播放"></a>音乐播放</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;mmsystem.h&gt;</span><span class="comment">//包含多媒体设备接口头文件</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment (lib,<span class="string">&quot;winmm.lib&quot;</span>)<span class="comment">//加载静态库</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//alias   的作用是取别名</span></span><br><span class="line">	mciSendString(<span class="string">&quot;open E:/0xC0de/C/2010/C1/C1/青花瓷.mp3 alias dqx &quot;</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);<span class="comment">//音乐在当前目录下也可以写&quot;open ./2.mp3&quot;./这里可以省略</span></span><br><span class="line">	mciSendString(<span class="string">&quot;play dqx&quot;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">	system(<span class="string">&quot;pause&quot;</span>);<span class="comment">//这里没有暂停程序会直接停止听不到音乐</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">返回值：MCIERROR即DWORD类型，而DWORD类型就是unsigned int，执行成功返回0，出错返回非0值</span></span><br><span class="line"><span class="comment">参数  :</span></span><br><span class="line"><span class="comment">1，lpstrCommand，指向以null结尾的命令字符串：”命令 设备[参数]” open 打开音乐文件 play 播放音乐 repeat 重复播放 close 关闭音乐文件</span></span><br><span class="line"><span class="comment">2，lpstrReturnString，指向接收返回信息的缓冲区，为NULL时不返回信息</span></span><br><span class="line"><span class="comment">3，uReturnLength，上述缓冲区的大小</span></span><br><span class="line"><span class="comment">4，hwndCallback，在命令串中含notify时，它指定一个回调窗口的句柄，一般为NULL</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/re4mile/re4mile.github.io/2023/01/11/language/C/%E5%BA%93%E5%87%BD%E6%95%B0/stdlib/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/language/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://s1.ax1x.com/2023/01/10/pSefBp6.jpg">
      <meta itemprop="name" content="re4mile(邓渠香)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="实践是检验真理的唯一标准">
      <meta itemprop="description" content="an ordinary people">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 实践是检验真理的唯一标准">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/re4mile.github.io/2023/01/11/language/C/%E5%BA%93%E5%87%BD%E6%95%B0/stdlib/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/language/" class="post-title-link" itemprop="url">stdlib字符串处理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-11 22:41:23" itemprop="dateCreated datePublished" datetime="2023-01-11T22:41:23+08:00">2023-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-01-07 10:36:05" itemprop="dateModified" datetime="2023-01-07T10:36:05+08:00">2023-01-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/re4mile.github.io/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44205382/article/details/109528735">https://blog.csdn.net/qq_44205382/article/details/109528735</a></p>
<h1 id="ato"><a href="#ato" class="headerlink" title="ato-"></a>ato-</h1><p>定义函数：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> <span class="title function_">atof</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *nptr)</span>;  <span class="comment">// string-&gt;double</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">atoi</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *nptr)</span>; 	<span class="comment">// string-&gt;int</span></span><br><span class="line"><span class="type">long</span> <span class="title function_">atol</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *nptr)</span>; 	<span class="comment">// strong-&gt;long</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>函数说明：</p>
<p>会扫描参数nptr字符串,</p>
<p>跳过前面的空格字符,</p>
<p>直到遇上数字或正负符号才开始做转换,</p>
<p>而再遇到<code>非数字</code>或<code>字符串结束</code>时才结束转换,并将结果返回。比如遇到空格就g</p>
<p>参数nptr字符串可包含正负号、小数点或E(e)来表示指数部分,如123.456或123e-2。</p>
<p>返回值：返回转换后的浮点型数。</p>
<p>附加说明：atof()与使用strtod(nptr,(char**)NULL)结果相同</p>
<p>附加说明：atoi()与使用strtol(nptr,(char**)NULL,10);结果相同</p>
<p>附加说明：atol()与使用strtol(nptr,(char**)NULL,10);结果相同</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span>* a = <span class="string">&quot;3.1415&quot;</span>;</span><br><span class="line">    <span class="type">char</span>* b = <span class="string">&quot;-200e-2&quot;</span>;<span class="comment">//200,整数没有科学计数法,小数才有</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lf %lf \n&quot;</span>, atof(a), atof(b));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d \n&quot;</span>, atoi(a), atoi(b));<span class="comment">//整数没有科学计数法,小数才有</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%ld %ld \n&quot;</span>, atol(a),atol(b));<span class="comment">//整数没有科学计数法,小数才有</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="strto"><a href="#strto" class="headerlink" title="strto-"></a>strto-</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> <span class="title function_">strtod</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *nptr,<span class="type">char</span> **endptr)</span>; <span class="comment">//string -&gt; double</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">strtol</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *nptr,<span class="type">char</span> **endptr,<span class="type">int</span> base)</span>; <span class="comment">//string-&gt;long </span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">strtoul</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *nptr,<span class="type">char</span> **endptr,<span class="type">int</span> base)</span>;<span class="comment">//strong unsigned long </span></span><br></pre></td></tr></table></figure>



<p><code>strtod函数</code>说明：</p>
<p>strtod()会扫描参数nptr字符串,</p>
<p>跳过前面的空格字符,直到遇上数字或正负符号才开始做转换,到出现非数字或字符串结束时 (‘&#x2F;0’)才结束转换,并将结果返回。</p>
<p>若endptr不为NULL,则会将遇到不合条件而终止的nptr中的字符指针由endptr传回。</p>
<p>参数nptr字符串可包含正负号、小数点或E(e)来表示指数部分。如123.456或123e-2。</p>
<p>返回值：返回转换后的浮点型数。</p>
<p><code>strtol函数</code>说明：</p>
<p>strtol()会将参数nptr字符串根据参数base来转换成长整型数。</p>
<p>参数base范围从2至36,或0。</p>
<p>参数base代表采用的进制方式,</p>
<p>如base值为10则采用10进制,</p>
<p>若base值为16则采用16进制等。</p>
<p>当base值为0时则是采用10进制做转换,但遇到如’0x’前置字符则会使用16进制做转换。</p>
<p>一开始strtol()会扫描参数nptr字符串,跳过前面的空格字符,直到遇上数字或正负符号才开始做转换,</p>
<p>再遇到非数字或字符串结束时(‘&#x2F;0’)结束转换,并将结果返回。</p>
<p>若参数endptr不为NULL,则会将遇到不合条件而终止的nptr中的字符指针由endptr返回。</p>
<p>返回值 返回转换后的长整型数,否则返回ERANGE并将错误代码存入errno中。</p>
<p>附加说明：ERANGE指定的转换字符串超出合法范围。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[] = <span class="string">&quot;1000000000&quot;</span>;</span><br><span class="line">    <span class="type">char</span> b[] = <span class="string">&quot;1234ffff&quot;</span>;</span><br><span class="line">    <span class="type">char</span>* c = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a = %d \n&quot;</span>, (<span class="type">int</span>)strtod(a, <span class="literal">NULL</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;b = %d \n&quot;</span>, (<span class="type">int</span>)strtod(b, &amp;c));</span><br><span class="line">    <span class="keyword">if</span> (c)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;c = %s \n&quot;</span>, c);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> a[] = <span class="string">&quot;1000&quot;</span>;</span><br><span class="line">    <span class="type">char</span> b[] = <span class="string">&quot;0x64&quot;</span>;</span><br><span class="line">    <span class="type">char</span>* c = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;10:a = %d \n&quot;</span>, strtol(a, <span class="literal">NULL</span>,<span class="number">10</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;10:a = %d \n&quot;</span>, strtol(a, <span class="literal">NULL</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;16:a = %d \n&quot;</span>, strtol(a, <span class="literal">NULL</span>, <span class="number">16</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;01:a = %d \n&quot;</span>, strtol(a, <span class="literal">NULL</span>, <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;16:b = %d \n&quot;</span>, strtol(b, <span class="literal">NULL</span>, <span class="number">16</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;16:b = %d \n&quot;</span>, strtol(b, <span class="literal">NULL</span>, <span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="数字转字符串"><a href="#数字转字符串" class="headerlink" title="数字转字符串"></a>数字转字符串</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">char *gcvt(double number,size_t ndigits,char *buf);</span><br></pre></td></tr></table></figure>



<p>gcvt函数说明：</p>
<p>gcvt()用来将参数number转换成ASCII码字符串,参数ndigits表示显示的位数。</p>
<p>gcvt()与ecvt()和fcvt()不同的地方在于,</p>
<p>gcvt()所转换后的字符串包含小数点或正负符号。若转换成功,转换后的字符串会放在参数buf指针所指的空间。</p>
<p>返回值：返回一字符串指针,此地址即为buf指针</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> a = <span class="number">3.1415926</span>;</span><br><span class="line">    <span class="type">double</span> b = <span class="number">-3.1415926</span>;</span><br><span class="line">    <span class="type">char</span>  sz_tmp[<span class="number">64</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    _gcvt(a, <span class="number">2</span>, sz_tmp);<span class="comment">//保留2位数</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a value = %s \n&quot;</span>, sz_tmp);</span><br><span class="line"></span><br><span class="line">    _gcvt(b, <span class="number">4</span>, sz_tmp);<span class="comment">//保留4位数</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;b value = %s \n&quot;</span>, sz_tmp);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="转ASCII"><a href="#转ASCII" class="headerlink" title="转ASCII"></a>转ASCII</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int toascii(int c)</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/re4mile/re4mile.github.io/2023/01/11/language/C/%E5%BA%93%E5%87%BD%E6%95%B0/ctype/language/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://s1.ax1x.com/2023/01/10/pSefBp6.jpg">
      <meta itemprop="name" content="re4mile(邓渠香)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="实践是检验真理的唯一标准">
      <meta itemprop="description" content="an ordinary people">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 实践是检验真理的唯一标准">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/re4mile.github.io/2023/01/11/language/C/%E5%BA%93%E5%87%BD%E6%95%B0/ctype/language/" class="post-title-link" itemprop="url">ctype.h</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-11 22:41:23" itemprop="dateCreated datePublished" datetime="2023-01-11T22:41:23+08:00">2023-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-01-07 10:36:05" itemprop="dateModified" datetime="2023-01-07T10:36:05+08:00">2023-01-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/re4mile.github.io/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="isprint-检测是否可打印"><a href="#isprint-检测是否可打印" class="headerlink" title="isprint 检测是否可打印"></a>isprint 检测是否可打印</h1><p>空格也可以打印</p>
<blockquote>
<p>  int isprint(int ASCII)</p>
</blockquote>
<p>可打印返回非零</p>
<p>否者返回0</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">127</span>;++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isprint</span>(i)!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">! &quot; # $ % &amp; &#x27; ( ) * + , - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z &#123; | &#125; ~</span><br></pre></td></tr></table></figure>



<h1 id="isgraph-检测是否有图形表示-空格除外"><a href="#isgraph-检测是否有图形表示-空格除外" class="headerlink" title="isgraph 检测是否有图形表示(空格除外)"></a>isgraph 检测是否有图形表示(空格除外)</h1><blockquote>
<p>  int isgraph(int ASCII)</p>
</blockquote>
<p>可打印返回非零(空格除外)</p>
<p>否者返回0</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">127</span>;++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isgraph</span>(i)!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">! &quot; # $ % &amp; &#x27; ( ) * + , - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z &#123; | &#125; ~</span><br></pre></td></tr></table></figure>



<h1 id="isalnum-检测是否是数字或者字母"><a href="#isalnum-检测是否是数字或者字母" class="headerlink" title="isalnum 检测是否是数字或者字母"></a>isalnum 检测是否是数字或者字母</h1><blockquote>
<p>   int isalnum(int ASCII)</p>
</blockquote>
<p>检测你的ASCII是不是数字或者字母</p>
<p>1不是ASCII的1</p>
<p>‘1’才是ASCII的‘1’</p>
<p>函数</p>
<p>返回非零状态,表示字母数字</p>
<p>返回零,不是字母数字</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">127</span>;++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isalnum</span>(i)!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 1 2 3 4 5 6 7 8 9 A B C D E F G H I J K L M N O P Q R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s t u v w x y z</span><br></pre></td></tr></table></figure>



<h1 id="isalpha-检测是不是字母"><a href="#isalpha-检测是不是字母" class="headerlink" title="isalpha 检测是不是字母"></a>isalpha 检测是不是字母</h1><blockquote>
<p>   <strong>int isalpha(int ASCII)</strong></p>
</blockquote>
<p>是字母返回非零</p>
<p>否者返回0</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">127</span>;++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isalpha</span>(i)!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A B C D E F G H I J K L M N O P Q R S T U V W X Y Z a b c d e f g h i j k l m n o p q r s t u v w x y z</span><br></pre></td></tr></table></figure>



<h1 id="islower-检测是小写字母"><a href="#islower-检测是小写字母" class="headerlink" title="islower 检测是小写字母"></a>islower 检测是小写字母</h1><blockquote>
<p>  <strong>int islower(int ASCII)</strong></p>
</blockquote>
<p>是小写字母返回非零</p>
<p>否者返回0</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">127</span>;++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ( <span class="built_in">islower</span>(i)!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a b c d e f g h i j k l m n o p q r s t u v w x y z</span><br></pre></td></tr></table></figure>



<h1 id="isupper-检测是大写字母"><a href="#isupper-检测是大写字母" class="headerlink" title="isupper 检测是大写字母"></a>isupper 检测是大写字母</h1><blockquote>
<p>  <strong>int isupper(int c)</strong></p>
</blockquote>
<p>是大写字母返回非零</p>
<p>否者返回0</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">127</span>;++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ( <span class="built_in">isupper</span>(i)!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A B C D E F G H I J K L M N O P Q R S T U V W X Y Z</span><br></pre></td></tr></table></figure>



<h1 id="isdigit-检测是不是10以内的ASCII-gt-10进制数字"><a href="#isdigit-检测是不是10以内的ASCII-gt-10进制数字" class="headerlink" title="isdigit 检测是不是10以内的ASCII-&gt;10进制数字"></a>isdigit 检测是不是10以内的ASCII-&gt;10进制数字</h1><blockquote>
<p>  int isdigit(inr ASCII)</p>
</blockquote>
<p>是10进制数字返回非零</p>
<p>否者返回0</p>
<p>‘0x20’不是10进制数字,更像一个字符串</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">127</span>;++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ( <span class="built_in">isdigit</span>(i)!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 1 2 3 4 5 6 7 8 9</span><br></pre></td></tr></table></figure>



<h1 id="isxdigit-检测是不是16进制的字符串"><a href="#isxdigit-检测是不是16进制的字符串" class="headerlink" title="isxdigit 检测是不是16进制的字符串"></a>isxdigit 检测是不是16进制的字符串</h1><p>是16进制数字返回非零</p>
<p>否者返回0</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	<span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">   	<span class="type">char</span> str[<span class="number">64</span>]=<span class="string">&quot;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">64</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isxdigit</span>(str[i])!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>,str[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> A B C D E F a b c d e f</span><br></pre></td></tr></table></figure>



<h1 id="iscntrl-检测是不是控制字符"><a href="#iscntrl-检测是不是控制字符" class="headerlink" title="iscntrl 检测是不是控制字符"></a>iscntrl 检测是不是控制字符</h1><blockquote>
<p>  int iscntrl(int ASCII)</p>
</blockquote>
<p>是控制字符返回非零</p>
<p>否者返回0</p>
<p>控制字符不可打印</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   	</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">127</span>;++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">iscntrl</span>(i)!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出它的10进制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 127</span><br></pre></td></tr></table></figure>





<h1 id="ispunct-检测是不是标点符号"><a href="#ispunct-检测是不是标点符号" class="headerlink" title="ispunct 检测是不是标点符号"></a>ispunct 检测是不是标点符号</h1><blockquote>
<p>  int ispunct(int ascii)</p>
</blockquote>
<p>可标点符号返回非零(空格除外)</p>
<p>否者返回0</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;C 语言中所有可打印的标点符号: \n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;=<span class="number">127</span>;++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">ispunct</span>(i)!=<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">! &quot; # $ % &amp; &#x27; ( ) * + , - . / : ; &lt; = &gt; ? @ [ \ ] ^ _ ` &#123; | &#125; ~ </span><br></pre></td></tr></table></figure>



<h1 id="isspace-检测是不是空白字符"><a href="#isspace-检测是不是空白字符" class="headerlink" title="isspace 检测是不是空白字符"></a>isspace 检测是不是空白字符</h1><blockquote>
<p>  int isspace(int c)</p>
</blockquote>
<p>空白字符:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x27; &#x27;     (0x20)    space (SPC) 空格符</span><br><span class="line">&#x27;\t&#x27;    (0x09)    horizontal tab (TAB) 水平制表符    </span><br><span class="line">&#x27;\n&#x27;    (0x0a)    newline (LF) 换行符</span><br><span class="line">&#x27;\v&#x27;    (0x0b)    vertical tab (VT) 垂直制表符</span><br><span class="line">&#x27;\f&#x27;    (0x0c)    feed (FF) 换页符</span><br><span class="line">&#x27;\r&#x27;    (0x0d)    carriage return (CR) 回车符</span><br></pre></td></tr></table></figure>



<p>是返回非零</p>
<p>否者返回0</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">int</span> ecx=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;=<span class="number">127</span>;++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isspace</span>(i)!=<span class="number">0</span>)</span><br><span class="line">            ecx++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;0-127中,有%d个空白字符&quot;</span>,ecx);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0-127中,有6个空白字符</span><br></pre></td></tr></table></figure>



<h1 id="tolower-大写变小写"><a href="#tolower-大写变小写" class="headerlink" title="tolower 大写变小写"></a>tolower 大写变小写</h1><blockquote>
<p>  <strong>int tolower(int 大写)</strong> </p>
</blockquote>
<p>返回值是小写的值</p>
<p>如果原本本来就是小写,或者他不是字母就不处理</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">   <span class="type">char</span> str[] = <span class="string">&quot;DQX is FINE&quot;</span>;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">while</span>( str[i] ) </span><br><span class="line">   &#123;</span><br><span class="line">      <span class="built_in">putchar</span>(<span class="built_in">tolower</span>(str[i]));</span><br><span class="line">      i++;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>); </span><br><span class="line"> </span><br><span class="line">   <span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dqx is fine</span><br></pre></td></tr></table></figure>



<h1 id="toupper-小写变大写"><a href="#toupper-小写变大写" class="headerlink" title="toupper 小写变大写"></a>toupper 小写变大写</h1><blockquote>
<p>   <strong>int toupper(int c)</strong></p>
</blockquote>
<p>返回一个大写的int值</p>
<p>如果原来就是大写,或者字符不存在大写就不管</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">   <span class="type">char</span> str[] = <span class="string">&quot;dqx IS fien&quot;</span>;</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">while</span>( str[i] ) </span><br><span class="line">   &#123;</span><br><span class="line">      <span class="built_in">putchar</span>(<span class="built_in">toupper</span>(str[i]));</span><br><span class="line">      i++;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>); </span><br><span class="line"> </span><br><span class="line">   <span class="keyword">return</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="toascii-把任意数字转化位可见字符"><a href="#toascii-把任意数字转化位可见字符" class="headerlink" title="toascii 把任意数字转化位可见字符"></a>toascii 把任意数字转化位可见字符</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctype.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">200</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>,toascii(a));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其实它不是函数,他是一个宏</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#define __toascii(c)   ((c) &amp; 0x7f)</span><br></pre></td></tr></table></figure>

<p>可能上面很多函数都是宏,只是没注意</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/re4mile/re4mile.github.io/2023/01/11/language/C/%E5%9F%BA%E7%A1%80/language/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://s1.ax1x.com/2023/01/10/pSefBp6.jpg">
      <meta itemprop="name" content="re4mile(邓渠香)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="实践是检验真理的唯一标准">
      <meta itemprop="description" content="an ordinary people">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 实践是检验真理的唯一标准">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/re4mile.github.io/2023/01/11/language/C/%E5%9F%BA%E7%A1%80/language/" class="post-title-link" itemprop="url">C语言</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-11 22:41:23" itemprop="dateCreated datePublished" datetime="2023-01-11T22:41:23+08:00">2023-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-01-07 10:36:05" itemprop="dateModified" datetime="2023-01-07T10:36:05+08:00">2023-01-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/re4mile.github.io/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h1><h2 id="成员"><a href="#成员" class="headerlink" title="成员"></a>成员</h2><h3 id="参数栈"><a href="#参数栈" class="headerlink" title="参数栈"></a>参数栈</h3><p>函数传递进来的参数在栈里面的分布情况</p>
<p> <img src="https://re4mile.gitee.io/res/photo/language/image-20221214143302362.png" alt="image-20221214143302362"></p>
<h3 id="va-list"><a href="#va-list" class="headerlink" title="va_list"></a>va_list</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">char</span> * va_list;</span><br></pre></td></tr></table></figure>



<h3 id="INTSIZEOF"><a href="#INTSIZEOF" class="headerlink" title="INTSIZEOF"></a>INTSIZEOF</h3><p><code>_INTSIZEOF(n)</code>: 把 n 圆整到 sizeof(int) 的倍数</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> _INTSIZEOF(n)       ( (sizeof(n)+sizeof(int)-1) &amp; ~(sizeof(int)-1) )</span></span><br></pre></td></tr></table></figure>

<p><code>_INTSIZEOF(n)</code>整个做的事情就是将字节长度n化为int长度的整数倍</p>
<p>~(sizeof(int)-1)  &#x3D; 1111 1100</p>
<p>一个数&amp; 1111 1100 ,结果一定为4的倍数</p>
<p>然后(sizeof(n)+ 3)&amp;1111 1100</p>
<p>例如，若<code>1≤sizeof(n)≤4</code>，则<code>_INTSIZEOF(n)＝4</code>；若<code>5≤sizeof(n)≤8</code>，则<code>_INTSIZEOF(n)=8</code></p>
<p>至于如何化到整数倍,我觉得不是我们应该关心的,我我们应该关心,为什么要化到整数倍</p>
<p>答案: 方便字节对齐,然后方便指针的访问,指针直接4字节4字节的移动</p>
<p>疑惑: 可不可以不要那个方便…可以呀,如果只去掉那个方便,你的程序会g</p>
<p>因为所有的参数都是push进去的,每个参数都战4字节,哪怕传递一个char进去</p>
<p>所以你的指针只能4字节4字节的访问</p>
<h3 id="va-start"><a href="#va-start" class="headerlink" title="va_start"></a>va_start</h3><p><code>va_start(out_ap,in_v)</code></p>
<p>初始化 out_ap 指针，</p>
<p>使其指向最第一个可变参数。</p>
<p>也就是地址最低,最后push进去,最上面那个成员</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> va_start(out_ap,in_v)      (out_ap = (char*)&amp;in_v + _INTSIZEOF(in_v)) <span class="comment">//于是就指向来了下一次参数</span></span></span><br></pre></td></tr></table></figure>

<h3 id="va-arg"><a href="#va-arg" class="headerlink" title="va_arg"></a>va_arg</h3><p><code> va_arg(in_ap, type)</code></p>
<p> 该宏返回当前变参值,并使 in_ap 指向列表中的下个变参,地址向下移动</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> va_arg(in_ap, type)    \</span></span><br><span class="line"><span class="meta">	( </span></span><br><span class="line">		*(type *)(</span><br><span class="line">            		(	in_ap += _INTSIZEOF(type) - _INTSIZEOF(type)	)</span><br><span class="line">        		)</span><br></pre></td></tr></table></figure>

<h3 id="va-end"><a href="#va-end" class="headerlink" title="va_end"></a>va_end</h3><p><em>va_end</em>(ap)  ,将指针 ap 置为无效，结束变参的获取</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> va_end(ap)             ( ap = (va_list)0 )</span></span><br></pre></td></tr></table></figure>



<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>如何遍历参数?</p>
<ol>
<li>设置cnt,记录有效参数个数</li>
<li>设置哨兵,-1</li>
<li>根据参数特定的标志来判断,eg: printf,scanf</li>
</ol>
<p>情况1</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">parse_valist_by_num</span><span class="params">(<span class="type">int</span> arg_cnt, ...)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    parse_valist_by_num(<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//第一个参数定义可变参数的个数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">parse_valist_by_num</span><span class="params">(<span class="type">int</span> arg_cnt, ...)</span></span><br><span class="line">&#123;</span><br><span class="line">    </span><br><span class="line">    va_list p_args;</span><br><span class="line">    va_start(p_args, arg_cnt);</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> idx;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(idx = <span class="number">1</span>; idx &lt;= arg_cnt; ++idx)&#123;</span><br><span class="line">        val = va_arg(p_args, <span class="type">int</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;第 %d 个参数: %d\n&quot;</span>, idx, val);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;---------------\n&quot;</span>);</span><br><span class="line">    va_end(p_args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>情况2</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">parse_valist_by_flag</span><span class="params">(<span class="type">int</span> num_1, ...)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    parse_valist_by_flag(<span class="number">1</span>,<span class="number">-1</span>);</span><br><span class="line">    parse_valist_by_flag(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数定义一个结束标记(-1)，调用时通过最后一个参数传递该标记，以结束变参的遍历打印。</span></span><br><span class="line"><span class="comment">//最后一个参数作为变参结束符(-1)，用于循环获取变参内容</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">parse_valist_by_flag</span><span class="params">(<span class="type">int</span> num_1, ...)</span></span><br><span class="line">&#123;</span><br><span class="line">    va_list p_args;</span><br><span class="line">    va_start(p_args, num_1);</span><br><span class="line">    <span class="type">int</span> idx = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> val = num_1;</span><br><span class="line">    <span class="keyword">while</span>(val != <span class="number">-1</span>)&#123;</span><br><span class="line">        ++idx;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;第 %d 个参数: %d\n&quot;</span>, idx, val);</span><br><span class="line">        val = va_arg(p_args, <span class="type">int</span>); <span class="comment">//得到下个变参值</span></span><br><span class="line">    &#125;</span><br><span class="line">    va_end(p_args);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;---------------\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>情况3</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">minprintf</span><span class="params">(<span class="type">char</span>* fmt, ...)</span></span><br><span class="line">&#123;</span><br><span class="line">    va_list ap;</span><br><span class="line">    <span class="type">char</span>* p, * sval;</span><br><span class="line">    <span class="type">int</span> ival;</span><br><span class="line">    <span class="type">double</span> dval;</span><br><span class="line"></span><br><span class="line">    va_start(ap, fmt);</span><br><span class="line">    <span class="keyword">for</span> (p = fmt; *p; p++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (*p != <span class="string">&#x27;%&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">putchar</span>(*p);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (*++p)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">            ival = va_arg(ap, <span class="type">int</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, ival);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;f&#x27;</span>:</span><br><span class="line">            dval = va_arg(ap, <span class="type">double</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%f&quot;</span>, dval);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">            <span class="keyword">for</span> (sval = va_arg(ap, <span class="type">char</span>*); *sval; sval++)</span><br><span class="line">                <span class="built_in">putchar</span>(*sval);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="built_in">putchar</span>(*p);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    va_end(ap);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    minprintf(<span class="string">&quot;%d %d&quot;</span>, <span class="number">123</span>, <span class="number">456</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h1><p>随机生成不重复的4选项</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;Four_Option;i++)	<span class="comment">//之所以是1开头,是因为0已经排好了 </span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">do</span>												<span class="comment">//生成不重复的随机数 </span></span><br><span class="line">    &#123;</span><br><span class="line">        Rand_Option_Flag=rand()%Num_Of_Words;</span><br><span class="line">        <span class="comment">//避免生成相同的随机数选项 </span></span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;i;j++)</span><br><span class="line">            <span class="keyword">if</span>(Option_Arr[j]==Rand_Option_Flag)								</span><br><span class="line">                <span class="keyword">break</span>;<span class="comment">//这里只是跳出这个小的for的循环 </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(i!=j);<span class="comment">//这个判断说明了它发现了存在相同的随机数 </span></span><br><span class="line">    Option_Arr[i]=Rand_Option_Flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/re4mile/re4mile.github.io/2023/01/11/language/C/win32/%E5%B0%8F%E4%B8%93%E9%A2%98/%E9%81%87%E5%88%B0%E7%9A%84API/language/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://s1.ax1x.com/2023/01/10/pSefBp6.jpg">
      <meta itemprop="name" content="re4mile(邓渠香)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="实践是检验真理的唯一标准">
      <meta itemprop="description" content="an ordinary people">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 实践是检验真理的唯一标准">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/re4mile.github.io/2023/01/11/language/C/win32/%E5%B0%8F%E4%B8%93%E9%A2%98/%E9%81%87%E5%88%B0%E7%9A%84API/language/" class="post-title-link" itemprop="url">win32 API积累</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-01-11 22:41:23 / 修改时间：21:01:30" itemprop="dateCreated datePublished" datetime="2023-01-11T22:41:23+08:00">2023-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/re4mile.github.io/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">CONSOLE_CURSOR_INFO</span> &#123;</span></span><br><span class="line">    DWORD  dwSize;<span class="comment">//光标大小所占一个字符的百分比</span></span><br><span class="line">    BOOL   bVisible; <span class="comment">//光标是否可见</span></span><br><span class="line">&#125; CONSOLE_CURSOR_INFO, *PCONSOLE_CURSOR_INFO;</span><br></pre></td></tr></table></figure>



<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="进程相关"><a href="#进程相关" class="headerlink" title="进程相关"></a>进程相关</h2><h3 id="WaitForDebugEvent"><a href="#WaitForDebugEvent" class="headerlink" title="WaitForDebugEvent"></a>WaitForDebugEvent</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">BOOL <span class="title function_">WaitForDebugEvent</span><span class="params">(</span></span><br><span class="line"><span class="params">  [out] LPDEBUG_EVENT lpDebugEvent, </span></span><br><span class="line"><span class="params">    <span class="comment">//指向接收调试事件信息的 DEBUG_EVENT 结构的指针。</span></span></span><br><span class="line"><span class="params">  [in]  DWORD         dwMilliseconds </span></span><br><span class="line"><span class="params">    <span class="comment">//等待调试事件的毫秒数。 如果此参数为零，则函数会测试调试事件并立即返回。 </span></span></span><br><span class="line"><span class="params">    <span class="comment">//如果参数为 INFINITE，则在调试事件发生之前，该函数不会返回。</span></span></span><br><span class="line"><span class="params">)</span>;</span><br></pre></td></tr></table></figure>

<p>如果该函数成功，则返回值为非零值。</p>
<p>如果函数失败，则返回值为零。 要获得更多的错误信息，请调用 GetLastError。</p>
<h2 id="线程相关"><a href="#线程相关" class="headerlink" title="线程相关"></a>线程相关</h2><h2 id="窗口相关"><a href="#窗口相关" class="headerlink" title="窗口相关"></a>窗口相关</h2><h3 id="Messagebox"><a href="#Messagebox" class="headerlink" title="Messagebox"></a>Messagebox</h3><p>   MB_ABORTRETRYIGNORE：消息框含有三个按钮：Abort，Retry和Ignore。</p>
<p>　　MB_OK：消息框含有一个按钮：OK。这是缺省值。</p>
<p>　　MB_OKCANCEL：消息框含有两个按钮：OK和Cancel。</p>
<p>　　MB_RETRYCANCEL：消息框含有两个按钮：Retry和Cancel。</p>
<p>　　MB_YESNO：消息框含有两个按钮：Yes和No。</p>
<p>　　MB_YESNOCANCEL：消息框含有三个按钮：Yes，No和Cancel。</p>
<p>　　指定下列标志中的一个来显示消息框中的图标：标志的含义如下。</p>
<p>　　MB_ICONWARNING：一个惊叹号出现在消息框。</p>
<p>　　MB_ICONASTERISK：一个圆圈中小写字母i组成的图标出现在消息框。</p>
<p>返回值</p>
<p>如果没有足够的内存来创建消息框，则返回值为零。如果函数调用成功，则返回值为下列对话框返回的菜单项目值中的一个：</p>
<p>　　IDABORT：Abort 按钮被选中。IDCANCEL：Cancel按钮被选中。IDIGNORE：Ignore按钮被选中。</p>
<p>　　IDNO：NO按钮被选中。IDOK：OK按钮被选中。IDRETRY：RETRY按钮被选中。</p>
<p>　　IDYES：YES按钮被选中。</p>
<p>　　如果一个消息框有一个Cancel按钮，且如果Esc键被按下或Cancel键被选择，则函数返回IDCANCEL值。如果消息框没有Cancel按钮，则按Esc键没有作用。</p>
<p>　</p>
<h2 id="资源分配相关"><a href="#资源分配相关" class="headerlink" title="资源分配相关"></a>资源分配相关</h2><h2 id="调试相关"><a href="#调试相关" class="headerlink" title="调试相关"></a>调试相关</h2><h2 id="未分类"><a href="#未分类" class="headerlink" title="未分类"></a>未分类</h2><p>  __in_opt  LPSECURITY_ATTRIBUTES lpMutexAttributes, &#x2F;&#x2F;安全属性,垃圾,NULL	</p>
<p>如果API有这种参数的话,就说明他是与内核对象相关的函数</p>
<h3 id="AdjustTokenPrivileges-特权设置"><a href="#AdjustTokenPrivileges-特权设置" class="headerlink" title="AdjustTokenPrivileges 特权设置"></a>AdjustTokenPrivileges 特权设置</h3><p>用于启用或禁止，指定访问令牌的特权</p>
<p><a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/366969">https://developer.aliyun.com/article/366969</a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">BOOL <span class="title">AdjustTokenPrivileges</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  [in]            HANDLE            TokenHandle, 	<span class="comment">//包含要修改de特权的句柄</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in]            BOOL              DisableAllPrivileges, <span class="comment">//是否禁用所有令牌的权限</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in, optional]  PTOKEN_PRIVILEGES NewState, 		<span class="comment">//新特权信息的指针,指定了一组特权和他们的属性.</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in]            DWORD             BufferLength, 	<span class="comment">//指向的缓冲区的大小</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [out, optional] PTOKEN_PRIVILEGES PreviousState, 	<span class="comment">//接收被改变特权当前状态的Buffer,他和都3个参数的类型一样的</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [out, optional] PDWORD            ReturnLength 	<span class="comment">//接收PreviousState缓存区要求的大小</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>

<p><strong>AdjustTokenPrivileges</strong>函数无法向访问令牌添加新权限。它只能启用或禁用令牌的现有权限。要确定令牌的权限，请调用 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/desktop/api/securitybaseapi/nf-securitybaseapi-gettokeninformation">GetTokenInformation</a>函数。</p>
<p>返回值<br>如果函数成功，则返回值非零。要确定函数是否调整了所有指定的权限，请调用 GetLastError，它会在函数成功时返回以下值之一：<br>令牌不具有在NewState参数中指定的一项或多项特权。即使没有调整权限，该函数也可能会成功并出现此错误值。PreviousState参数表示已调整的权限 。</p>
<p>如果函数失败，则返回值为零。要获取扩展的错误信息，请调用GetLastError。</p>
<h3 id="CopyFile"><a href="#CopyFile" class="headerlink" title="CopyFile"></a>CopyFile</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BOOL <span class="title function_">CopyFile</span><span class="params">(</span></span><br><span class="line"><span class="params">  [in] LPCTSTR lpExistingFileName, <span class="comment">//S</span></span></span><br><span class="line"><span class="params">  [in] LPCTSTR lpNewFileName, <span class="comment">//D</span></span></span><br><span class="line"><span class="params">  [in] BOOL    bFailIfExists</span></span><br><span class="line"><span class="params">)</span>;</span><br></pre></td></tr></table></figure>



<p>最后一个参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[in] bFailIfExists</span><br></pre></td></tr></table></figure>

<p>如果此参数为<strong>TRUE</strong>,原文存在,则函数失败</p>
<p>如果此参数为 <strong>FALSE</strong>,源文件不存在,于是就覆盖</p>
<p>返回值</p>
<p>如果函数成功，则返回值非零。<br>如果函数失败，则返回值为零。要获取扩展的错误信息，请调用 GetLastError。</p>
<h3 id="CallNextHookEx"><a href="#CallNextHookEx" class="headerlink" title="CallNextHookEx"></a>CallNextHookEx</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">LRESULT <span class="title">CallNextHookEx</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    HHOOK  hhk, <span class="comment">//该参数被忽略。</span></span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="type">int</span>    nCode,</span></span></span><br><span class="line"><span class="params"><span class="function">    WPARAM wParam,</span></span></span><br><span class="line"><span class="params"><span class="function">    LPARAM lParam</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>



<p>ncode</p>
<p>传递给当前钩子过程的钩子代码。下一个钩子过程使用此代码来确定如何处理钩子信息。</p>
<p>类型：<strong>WPARAM</strong></p>
<p>传递给当前挂钩过程的<em>wParam值。</em>该参数的含义取决于与当前钩子链关联的钩子类型 </p>
<p>类型：<strong>LPARAM</strong></p>
<p>传递给当前挂钩过程的<em>lParam值。</em>该参数的含义取决于与当前钩子链关联的钩子类型。</p>
<p>正确的消息处理流程应该如下</p>
<p>　　物理击键</p>
<p>　　　↓</p>
<p>　　钩子管理函数←→钩子A←→钩子B←→钩子C←→钩子D</p>
<p>　　　↓</p>
<p>　　Window消息处理函数</p>
<p>在钩子A函数中，如果调用CallNextHookEx函数，则会将按键消息传给钩子B；</p>
<p>如果不调用CallNextHookEx函数，则钩子B不会得到按键消息，换句话说，钩子B失效了，当然此时的钩子C和钩子D也失效了。为了钩子间和平相处，还是应该在钩子函数里添加CallNextHookEx函数的调用。</p>
<p>钩子函数的返回值的问题。在上面的事例中，钩子A的返回值决定按键消息是否丢弃。</p>
<p>返回值0，告诉系统，消息继续传递给Window消息处理函数；</p>
<p>返回值1（非0），告诉系统，消息将丢弃，Window消息处理函数得不到按键的消息。</p>
<h3 id="ContinueDebugEvent"><a href="#ContinueDebugEvent" class="headerlink" title="ContinueDebugEvent"></a>ContinueDebugEvent</h3><p>使调试器能够继续先前报告调试事件的线程。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">BOOL <span class="title">ContinueDebugEvent</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  [in] DWORD dwProcessId,</span></span></span><br><span class="line"><span class="params"><span class="function">  [in] DWORD dwThreadId,</span></span></span><br><span class="line"><span class="params"><span class="function">  [in] DWORD dwContinueStatus</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>







<h3 id="DebugActiveProcess"><a href="#DebugActiveProcess" class="headerlink" title="DebugActiveProcess"></a>DebugActiveProcess</h3><p>使调试器附加到一个活动进程并且调试它。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">BOOL <span class="title">DebugActiveProcess</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  [in] DWORD dwProcessId</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>

<p>返回</p>
<p>如果函数成功，则返回值非零。</p>
<p>如果函数失败，则返回值为 0（零）。要获取扩展的错误信息，请调用 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror">GetLastError</a></p>
<h3 id="GetSystemDirectory"><a href="#GetSystemDirectory" class="headerlink" title="GetSystemDirectory"></a>GetSystemDirectory</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UINT <span class="title function_">GetSystemDirectoryA</span><span class="params">(</span></span><br><span class="line"><span class="params">  [out] LPSTR lpBuffer,<span class="comment">//用于装载系统目录路径名的一个字串缓冲区</span></span></span><br><span class="line"><span class="params">  [in]  UINT  uSize<span class="comment">//字串的最大长度</span></span></span><br><span class="line"><span class="params">)</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="GlobalAlloc-全局堆分配"><a href="#GlobalAlloc-全局堆分配" class="headerlink" title="GlobalAlloc 全局堆分配"></a>GlobalAlloc 全局堆分配</h3><p>该函数从堆中分配一定数目的字节数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">DECLSPEC_ALLOCATOR HGLOBAL <span class="title">GlobalAlloc</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  [in] UINT   uFlags, <span class="comment">//  分配属性(方式)</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in] SIZE_T dwBytes <span class="comment">// 分配的字节数</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>





<p>返回值</p>
<p>若函数调用成功,则返回一个新分配的内存对象的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%8F%A5%E6%9F%84">句柄</a>。</p>
<p>若函数调用失败,则返回<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/NULL">NULL</a>。可调用<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/GetLastError">GetLastError</a>以获得更多错误信息。</p>
<p>若<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8">函数调用</a>成功,将至少分配所需内存.若实际分配量超过所需,则内存仍然能够充分利用之.可用函数 GlobalSize 来确定实际所分配的字节数。</p>
<p>可使用 GlobalFree 来释放内存。</p>
<h3 id="Globallock"><a href="#Globallock" class="headerlink" title="Globallock"></a>Globallock</h3><p>锁定内存中指定的内存块，并返回一个地址值，令其指向内存块的起始处。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">LPVOID <span class="title">GlobalLock</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  [in] HGLOBAL hMem</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>

<p>除非用 GlobalUnlock 函数将内存块解锁，否则地址会一直保持有效</p>
<p>参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[in] hMem</span><br></pre></td></tr></table></figure>

<p>全局内存对象的句柄。此句柄由 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/desktop/api/winbase/nf-winbase-globalalloc">GlobalAlloc</a>或 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/desktop/api/winbase/nf-winbase-globalrealloc">GlobalReAlloc</a>函数返回</p>
<p>返回值</p>
<p>如果函数成功，则返回值是指向内存块第一个字节的指针。</p>
<p>如果函数失败，则返回值为<strong>NULL</strong>。</p>
<ol start="4">
<li></li>
</ol>
<h3 id="InternetOpenA"><a href="#InternetOpenA" class="headerlink" title="InternetOpenA"></a>InternetOpenA</h3><p> 初始化应用程序对 WinINet 函数的使用</p>
<p>该函数是第一个由应用程序调用的 WinINet 函数。它告诉 Internet DLL 初始化内部数据结构并准备接收应用程序之后的其他调用。当应用程序结束使用 Internet 函数时，应调用 InternetCloseHandle 函数来释放与之相关的资源。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">HINTERNET <span class="title">InternetOpenA</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  [in] LPCSTR lpszAgent, <span class="comment">//exe调用WinINet函数的应用程序或入口</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in] DWORD  dwAccessType, <span class="comment">//指定访问类型</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in] LPCSTR lpszProxy, <span class="comment">//指定一个可选的主机名列表或IP地址</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in] LPCSTR lpszProxyBypass,</span></span></span><br><span class="line"><span class="params"><span class="function">  [in] DWORD  dwFlags</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>

<p>返回值</p>
<p>成功：返回一个有效的句柄，该句柄将由应用程序传递给接下来的WinINet函数。</p>
<p>失败：返回NULL。	</p>
<h3 id="InternetOpenUrl"><a href="#InternetOpenUrl" class="headerlink" title="InternetOpenUrl"></a>InternetOpenUrl</h3><p>打开由完整的 FTP 或 HTTP URL 指定的资源</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">HINTERNET <span class="title">InternetOpenUrlA</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  [in] HINTERNET hInternet, <span class="comment">//会话句柄,由InternetOpen 调用返回</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in] LPCSTR    lpszUrl, <span class="comment">//指定读取的网址</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in] LPCSTR    lpszHeaders, <span class="comment">//指定发送到HTTP服务器的头信息</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in] DWORD     dwHeadersLength,</span></span></span><br><span class="line"><span class="params"><span class="function">  [in] DWORD     dwFlags,</span></span></span><br><span class="line"><span class="params"><span class="function">  [in] DWORD_PTR dwContext</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>

<p>返回值</p>
<p>如果连接成功建立，则返回 URL 的有效句柄；如果连接失败，则返回<strong>NULL 。</strong>要检索特定错误消息，请调用 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror">GetLastError</a>。要确定拒绝访问服务的原因，请调用 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/desktop/api/wininet/nf-wininet-internetgetlastresponseinfoa">InternetGetLastResponseInfo</a>。</p>
<h3 id="InternetReadFile-打开的句柄中读取数据。"><a href="#InternetReadFile-打开的句柄中读取数据。" class="headerlink" title="InternetReadFile 打开的句柄中读取数据。"></a>InternetReadFile 打开的句柄中读取数据。</h3><p>打开的句柄中读取数据。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">BOOL <span class="title">InternetReadFile</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  [in]  HINTERNET hFile,</span></span></span><br><span class="line"><span class="params"><span class="function">  [out] LPVOID    lpBuffer, <span class="comment">//缓冲器指针</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in]  DWORD     dwNumberOfBytesToRead, <span class="comment">///欲读数据的字节量</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [out] LPDWORD   lpdwNumberOfBytesRead <span class="comment">//接收读取字节量的变量s</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[in] hFile</span><br></pre></td></tr></table></figure>

<p>从先前调用 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/desktop/api/wininet/nf-wininet-internetopenurla">InternetOpenUrl</a>、 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/desktop/api/wininet/nf-wininet-ftpopenfilea">FtpOpenFile</a>或 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/desktop/api/wininet/nf-wininet-httpopenrequesta">HttpOpenRequest</a>返回的句柄。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[out] lpBuffer</span><br></pre></td></tr></table></figure>

<p>指向接收数据的缓冲区的指针。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[in] dwNumberOfBytesToRead</span><br></pre></td></tr></table></figure>

<p>要读取的字节数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[out] lpdwNumberOfBytesRead</span><br></pre></td></tr></table></figure>

<p>指向接收读取字节数的变量的指针。 <strong>InternetReadFile</strong>在进行任何工作或错误检查之前将此值设置为零。</p>
<p> 返回值</p>
<p>如果成功则返回<strong>TRUE ，否则返回****FALSE</strong>。要获取扩展的错误信息，请调用 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror">GetLastError</a>。</p>
<h3 id="KeyboardProc"><a href="#KeyboardProc" class="headerlink" title="KeyboardProc"></a>KeyboardProc</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LRESULT CALLBACK KeyboardProc</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> code,</span><br><span class="line">    WPARAM wParam,</span><br><span class="line">    LPARAM lParam</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>nCode: 根据这个数值决定怎样处理消息</p>
<p>​			如果 code 小于0，则 必须让KeyboardProc()函数返回CallNextHookEx()</p>
<p>​			code可以是下列值：</p>
<p>​			HC_ACTION：wParam和lParam包含按键消息</p>
<p>​			HC_NOREMOVE：wParam和lParam包含按键消息,并且按键消息不能从<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97">消息队列</a>中移除（一个被PeekMessage<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8">函数调用</a>的请求，指定   			PM_NOREMOVE标志）</p>
<p>wParam: 按键的虚拟键值消息，例如:VK_F1</p>
<p>lParam: 根据不同的位数具有多种不同的含义</p>
<p>LRESULT是一个数据类型，指的是从窗口程序或者回调函数返回的32位值。</p>
<p>CALLBACK是由用户设计却由windows系统呼叫的函数，统称为callback函数。某些API函数要求以callback作为你参数之一。</p>
<h3 id="lstrcat"><a href="#lstrcat" class="headerlink" title="lstrcat"></a>lstrcat</h3><p>字符串衔接</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LPSTR <span class="title function_">lstrcat</span><span class="params">(</span></span><br><span class="line"><span class="params">  [in, out] LPSTR  lpString1, <span class="comment">//S</span></span></span><br><span class="line"><span class="params">  [in]      LPCSTR lpString2 <span class="comment">//D</span></span></span><br><span class="line"><span class="params">)</span>;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[in, out] lpString1</span><br></pre></td></tr></table></figure>

<p>类型：<strong>LPTSTR</strong></p>
<p>第一个以 null 结尾的字符串。此缓冲区必须足够大以包含两个字符串。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[in] lpString2</span><br></pre></td></tr></table></figure>

<p>类型：<strong>LPTSTR</strong></p>
<p>要附加到<em>lpString1</em>参数中指定的字符串的空终止字符串。</p>
<p>返回值</p>
<p>如果函数成功，则返回值是指向缓冲区的指针。</p>
<p>如果函数失败，则返回值为<strong>NULL</strong> ，并且<em>lpString1</em>可能不是以 null 结尾的。</p>
<h3 id="LookupPrivilegeValueA"><a href="#LookupPrivilegeValueA" class="headerlink" title="LookupPrivilegeValueA"></a>LookupPrivilegeValueA</h3><p>函数查看系统权限的特权值，返回信息到一个LUID结构体里</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BOOL <span class="title function_">LookupPrivilegeValueA</span><span class="params">(</span></span><br><span class="line"><span class="params">  [in, optional] LPCSTR lpSystemName, <span class="comment">//表示所要查看的系统，本地系统直接用NULL</span></span></span><br><span class="line"><span class="params">  [in]           LPCSTR lpName, <span class="comment">//指定特权的名称</span></span></span><br><span class="line"><span class="params">  [out]          PLUID  lpLuid <span class="comment">//接收所返回的制定特权名称的信息接收所返回的制定特权名称的信息</span></span></span><br><span class="line"><span class="params">)</span>;</span><br></pre></td></tr></table></figure>



<p>一个指向变量的指针，该变量接收由<em>lpSystemName</em>参数指定的系统上的权限已知的 LUID。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">_LUID</span> &#123;</span><br><span class="line">    DWORD LowPart;</span><br><span class="line">    LONG HighPart;</span><br><span class="line">&#125; LUID, *PLUID;</span><br></pre></td></tr></table></figure>



<p>返回值</p>
<p>函数调用成功后，信息存入第三个类型为LUID的结构体中，并且函数返回非0</p>
<h3 id="UnhookWindowsHookEx"><a href="#UnhookWindowsHookEx" class="headerlink" title="UnhookWindowsHookEx"></a>UnhookWindowsHookEx</h3><p>通过UnhookWindowsHookEx函数删除安装在挂钩链中的挂钩过程</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BOOL <span class="title function_">UnhookWindowsHookEx</span><span class="params">(</span></span><br><span class="line"><span class="params">   HHOOK hhk</span></span><br><span class="line"><span class="params">)</span>;</span><br></pre></td></tr></table></figure>

<p>类型：<strong>HHOOK</strong></p>
<p>要移除的挂钩的handle。此参数是通过先前调用SetWindowsHookEx获得的挂钩句柄。</p>
<p>返回值</p>
<p>如果函数成功，则返回值非零。</p>
<p>如果函数失败，则返回值为零。</p>
<h3 id="OutputDebugString"><a href="#OutputDebugString" class="headerlink" title="OutputDebugString"></a>OutputDebugString</h3><p>类似于printf,将字符串发送到调试器进行显示。</p>
<h3 id="OpenProcessToken-以某种访问权限打开一个进程"><a href="#OpenProcessToken-以某种访问权限打开一个进程" class="headerlink" title="OpenProcessToken 以某种访问权限打开一个进程"></a>OpenProcessToken 以某种访问权限打开一个进程</h3><p>用来打开与进程相关联的访问令牌</p>
<p>OpenProcessToken函数用来打开与进程相关联的访问令牌</p>
<p><code>得到指定进程的访问令牌，而第三个参数定义设置不正确可能导致该函数调用失败</code></p>
<p>要对一个任意进程（包括系统安全进程和服务进程）进行指定了写相关的访问权的OpenProcess操作，只要当前进程具有<code>SeDeDebug</code>权限就可以了。要是一个用户是Administrator或是被给予了相应的权限，就可以具有该权限。</p>
<p>可是，就算我们用Administrator帐号对一个系统安全进程执行OpenProcess(PROCESS_ALL_ACCESS,FALSE, dwProcessID)还是会遇到“访问拒绝”的错误。什么原因呢？原来在<code>默认的情况下进程的一些访问权限是没有被启用（Enabled）</code>的，所以我们要做的首先是启用这些权限。</p>
<p>《WINDOWS核心编程》!</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/stonesharp/article/details/7709674">https://blog.csdn.net/stonesharp/article/details/7709674</a></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">BOOL <span class="title">OpenProcessToken</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  [in]  HANDLE  ProcessHandle,<span class="comment">//要修改访问权限的进程句柄</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in]  DWORD   DesiredAccess, <span class="comment">//你要进行的操作类型</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [out] PHANDLE TokenHandle 	<span class="comment">//返回的访问令牌指针</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>



<p>如果函数成功，则返回值非零。</p>
<p>如果函数失败，则返回值为零</p>
<h3 id="ShellExecute-Dev环境"><a href="#ShellExecute-Dev环境" class="headerlink" title="ShellExecute -Dev环境"></a>ShellExecute -Dev环境</h3><p>对指定文件执行操作。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">HINSTANCE <span class="title">ShellExecuteA</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  [in, optional] HWND   hwnd,</span></span></span><br><span class="line"><span class="params"><span class="function">  [in, optional] LPCSTR lpOperation,</span></span></span><br><span class="line"><span class="params"><span class="function">  [in]           LPCSTR lpFile,</span></span></span><br><span class="line"><span class="params"><span class="function">  [in, optional] LPCSTR lpParameters,</span></span></span><br><span class="line"><span class="params"><span class="function">  [in, optional] LPCSTR lpDirectory,</span></span></span><br><span class="line"><span class="params"><span class="function">  [in]           INT    nShowCmd</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>

<p>参数2</p>
<p>这个参数可以是<code>&quot;edit&quot;</code> <code>&quot;explore&quot;</code> <code>&quot;open&quot;</code> <code>&quot;print&quot;</code> <code>&quot;runas&quot;</code> <code>NULL</code>，分别可以打开编辑器、在文件资源管理器中查看、打开、屏幕输出和 <strong>以管理员身份运行</strong> 。</p>
<p>最后一个参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">SW_HIDE 隐藏窗口，活动状态给令一个窗口 </span><br><span class="line"></span><br><span class="line">SW_MINIMIZE 最小化窗口，活动状态给令一个窗口 </span><br><span class="line"></span><br><span class="line">SW_RESTORE 用原来的大小和位置显示一个窗口，同时令其进入活动状态 </span><br><span class="line"></span><br><span class="line">SW_SHOW 用当前的大小和位置显示一个窗口，同时令其进入活动状态 </span><br><span class="line"></span><br><span class="line">SW_SHOWMAXIMIZED 最大化窗口，并将其激活 </span><br><span class="line"></span><br><span class="line">SW_SHOWMINIMIZED 最小化窗口，并将其激活 </span><br><span class="line"></span><br><span class="line">SW_SHOWMINNOACTIVE 最小化一个窗口，同时不改变活动窗口 </span><br><span class="line"></span><br><span class="line">SW_SHOWNA 用当前的大小和位置显示一个窗口，不改变活动窗口 </span><br><span class="line"></span><br><span class="line">SW_SHOWNOACTIVATE 用最近的大小和位置显示一个窗口，同时不改变活动窗口 </span><br><span class="line"></span><br><span class="line">SW_SHOWNORMAL 与SW_RESTORE相同 </span><br></pre></td></tr></table></figure>



<p>返回值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">返回值大于32表示执行成功</span><br><span class="line">返回值小于32表示执行错误</span><br><span class="line">返回值可能的错误有: = 0 &#123;内存不足&#125;</span><br><span class="line">ERROR_FILE_NOT_FOUND = 2; &#123;文件名错误&#125;</span><br><span class="line">ERROR_PATH_NOT_FOUND = 3; &#123;路径名错误&#125;</span><br><span class="line">ERROR_BAD_FORMAT = 11; &#123;EXE 文件无效&#125;</span><br><span class="line">SE_ERR_SHARE = 26; &#123;发生共享错误&#125;</span><br><span class="line">SE_ERR_ASSOCINCOMPLETE = 27; &#123;文件名不完全或无效&#125;</span><br><span class="line">SE_ERR_DDETIMEOUT = 28; &#123;超时&#125;</span><br><span class="line">SE_ERR_DDEFAIL = 29; &#123;DDE 事务失败&#125;</span><br><span class="line">SE_ERR_DDEBUSY = 30; &#123;正在处理其他 DDE 事务而不能完成该 DDE 事务&#125;</span><br><span class="line">SE_ERR_NOASSOC = 31; &#123;没有相关联的应用程序&#125;</span><br></pre></td></tr></table></figure>



<p>开始一个新的应用程序 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ShellExecute(NULL, &quot;open&quot;, &quot;notepad.exe&quot;, NULL, NULL, SW_SHOWNORMAL); </span><br></pre></td></tr></table></figure>

<p>打开记事本，并打开一个文件(系统能识别记事本应用程序的路径，因此我们不必使用绝对路径） </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res=ShellExecute(NULL, &quot;open&quot;, &quot;notepad.exe&quot;, &quot;C:\\Users\\0x9D\\Desktop\\Test\\Work_Now.cpp&quot;, NULL, SW_SHOWNORMAL);</span><br></pre></td></tr></table></figure>

<p>打印一个文档 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ShellExecute(Handle, &#x27;print&#x27;, PChar(&#x27;c:/test/test.doc&#x27;), nil, nil, SW_SHOW); </span><br></pre></td></tr></table></figure>

<p>注意：可能你会看到word暂时的被打开，但它会自动关闭。 </p>
<p>打开一个HTML页面 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ShellExecute</span>(<span class="literal">NULL</span>, <span class="string">&quot;open&quot;</span>, <span class="string">&quot;http://wus20.com&quot;</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, SW_SHOW);</span><br><span class="line"><span class="built_in">ShellExecute</span>(<span class="literal">NULL</span>, <span class="string">&quot;open&quot;</span>, <span class="string">&quot;C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe&quot;</span>, <span class="string">&quot;bilibili.com&quot;</span>, <span class="literal">NULL</span>, SW_SHOWNORMAL);</span><br></pre></td></tr></table></figure>

<p>你能通过一个已经注册的文件类型来打开应用程序 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">　　ShellExecute(Handle, &#x27;open&#x27;, PChar(&#x27;c:/test/readme.txt&#x27;), nil, nil, SW_SHOW); </span><br></pre></td></tr></table></figure>

<p>用windows Explorer 打开一个目录 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">　ShellExecute(Handle, &#x27;explore&#x27;, PChar(&#x27;c:/windows)&#x27;, nil, nil, SW_SHOW); </span><br></pre></td></tr></table></figure>

<p>运行一个DOS命令并立即返回 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">　　ShellExecute(Handle, &#x27;open&#x27;, PChar(&#x27;command.com&#x27;), PChar(&#x27;/c copy file1.txt file2.txt&#x27;), nil, SW_SHOW); </span><br></pre></td></tr></table></figure>

<p>运行一个DOS命令并保持DOS窗口存在 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res=ShellExecute(NULL, &quot;open&quot;, &quot;cmd&quot;, &quot;/k dir&quot;, NULL, SW_SHOW); </span><br></pre></td></tr></table></figure>



<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;tchar.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	SHELLEXECUTEINFO dqx = &#123; <span class="built_in">sizeof</span>(SHELLEXECUTEINFO) &#125;;</span><br><span class="line">	dqx.lpVerb = <span class="built_in">TEXT</span>(<span class="string">&quot;runas&quot;</span>);</span><br><span class="line">	dqx.lpFile = <span class="built_in">TEXT</span>(<span class="string">&quot;cmd.exe&quot;</span>);</span><br><span class="line">	dqx.nShow = SW_SHOWNORMAL;</span><br><span class="line">	<span class="keyword">if</span> (!<span class="built_in">ShellExecuteEx</span>(&amp;dqx))</span><br><span class="line">	&#123;</span><br><span class="line">		DWORD dwStatus = <span class="built_in">GetLastError</span>();</span><br><span class="line">		<span class="keyword">if</span> (dwStatus == ERROR_CANCELLED)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;提升权限被用户拒绝\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (dwStatus == ERROR_FILE_NOT_FOUND)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;所要执行的文件没有找到\n&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">system</span>(<span class="string">&quot;pause nul&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>建立一个网页</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span> </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	HINSTANCE ret=<span class="number">0</span>;</span><br><span class="line">	ret=<span class="built_in">ShellExecute</span>(<span class="literal">NULL</span>, <span class="string">&quot;open&quot;</span>, <span class="string">&quot;http://wus20.com&quot;</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, SW_SHOW);</span><br><span class="line">	<span class="keyword">if</span>(ret&lt;(HINSTANCE)<span class="number">32</span>)</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span> </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">IsProcessRunAsAdmin</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    SID_IDENTIFIER_AUTHORITY NtAuthority = SECURITY_NT_AUTHORITY;</span><br><span class="line">    PSID AdministratorsGroup;</span><br><span class="line">    BOOL b = <span class="built_in">AllocateAndInitializeSid</span>(</span><br><span class="line">        &amp;NtAuthority,</span><br><span class="line">        <span class="number">2</span>,</span><br><span class="line">        SECURITY_BUILTIN_DOMAIN_RID,</span><br><span class="line">        DOMAIN_ALIAS_RID_ADMINS,</span><br><span class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">        &amp;AdministratorsGroup);</span><br><span class="line">    <span class="keyword">if</span>(b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">CheckTokenMembership</span>(<span class="literal">NULL</span>, AdministratorsGroup, &amp;b);</span><br><span class="line">        <span class="built_in">FreeSid</span>(AdministratorsGroup);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b == TRUE;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">short</span> <span class="title">GetAdmin</span><span class="params">(LPCSTR Param, <span class="type">int</span> Showcmd)</span><span class="comment">//一个参数是程序运行时的参数，另一个是启动窗口的状态</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">IsProcessRunAsAdmin</span>())</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    TCHAR Path[MAX_PATH];</span><br><span class="line">    <span class="built_in">ZeroMemory</span>(Path, MAX_PATH);</span><br><span class="line">    ::<span class="built_in">GetModuleFileName</span>(<span class="literal">NULL</span>, Path, MAX_PATH);           <span class="comment">//获取程序路径</span></span><br><span class="line">    HINSTANCE res;</span><br><span class="line">    res = <span class="built_in">ShellExecute</span>(<span class="literal">NULL</span>, <span class="string">&quot;runas&quot;</span>, Path, <span class="literal">NULL</span>, <span class="literal">NULL</span>, Showcmd);</span><br><span class="line">    <span class="keyword">if</span>(res &gt; (HINSTANCE)<span class="number">32</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">short</span> ret=<span class="number">0</span>; </span><br><span class="line">	ret=<span class="built_in">GetAdmin</span>(<span class="string">&quot;calc&quot;</span>,SW_SHOW);</span><br><span class="line">	<span class="keyword">if</span>(ret!=<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">&quot;wrong&quot;</span>); </span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,argv[<span class="number">1</span>]); </span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h3 id="SetWindowsHookExW-钩取流程"><a href="#SetWindowsHookExW-钩取流程" class="headerlink" title="SetWindowsHookExW - 钩取流程"></a>SetWindowsHookExW - 钩取流程</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HHOOK <span class="title function_">SetWindowsHookExW</span><span class="params">(</span></span><br><span class="line"><span class="params">  <span class="type">int</span>       idHook, <span class="comment">//处理的类型?键盘类型</span></span></span><br><span class="line"><span class="params">  HOOKPROC  lpfn, <span class="comment">//自定义的KeyboardProc函数</span></span></span><br><span class="line"><span class="params">  HINSTANCE hmod, <span class="comment">//是装载dll还是卸载dll</span></span></span><br><span class="line"><span class="params">  DWORD     dwThreadId  <span class="comment">//是钩取某个线程还是hook所有的线程</span></span></span><br><span class="line"><span class="params">)</span>;</span><br></pre></td></tr></table></figure>

<ol>
<li>int hook——指定事件的钩子ID，如键盘事件WH_KEYBOARD。设置后只对键盘输入起反应。</li>
<li>HOOKPROC lpfn——钩子的处理函数，若设置的是键盘输入钩子，必须是微软定义的一个叫KeyboardProc的函数。</li>
<li>HINSTANCE hmod——模块句柄，因此一般设置钩子的地方在DLL中。</li>
<li>DWORD dwThreadId——需要设置钩子的线程ID，倘若为0则为全局钩子（所有程序都钩）。</li>
</ol>
<h3 id="TOKEN-PRIVILEGES"><a href="#TOKEN-PRIVILEGES" class="headerlink" title="TOKEN_PRIVILEGES"></a>TOKEN_PRIVILEGES</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">_TOKEN_PRIVILEGES</span> &#123;</span><br><span class="line">  DWORD               PrivilegeCount; <span class="comment">///下一个数组元素的个数</span></span><br><span class="line">  LUID_AND_ATTRIBUTES Privileges[ANYSIZE_ARRAY];  <span class="comment">//数组.类型为LUID_AND_ATTRIBUTES</span></span><br><span class="line">&#125; TOKEN_PRIVILEGES, *PTOKEN_PRIVILEGES;</span><br></pre></td></tr></table></figure>





<h3 id="URLDownloadToFile"><a href="#URLDownloadToFile" class="headerlink" title="URLDownloadToFile"></a>URLDownloadToFile</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">HRESULT <span class="title">URLDownloadToFile</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">             LPUNKNOWN            pCaller,<span class="comment">//如果调用应用程序不是 ActiveX 组件，则可以将此值设置为NULL</span></span></span></span><br><span class="line"><span class="params"><span class="function">             LPCTSTR              szURL, <span class="comment">//指向包含要下载的 URL 的字符串值的指针。</span></span></span></span><br><span class="line"><span class="params"><span class="function">    									<span class="comment">//不能设置为NULL。如果 URL 无效，则返回 INET_E_DOWNLOAD_FAILURE</span></span></span></span><br><span class="line"><span class="params"><span class="function">             LPCTSTR              szFileName,<span class="comment">//指向字符串值的指针，该字符串值包含要为下载创建的文件的名称</span></span></span></span><br><span class="line"><span class="params"><span class="function">    										<span class="comment">//或完整路径。如果szFileName包含路径，则目标目录必须已经存在</span></span></span></span><br><span class="line"><span class="params"><span class="function">  _Reserved_ DWORD                dwReserved,<span class="comment">//保留。必须设置为 0。</span></span></span></span><br><span class="line"><span class="params"><span class="function">             LPBINDSTATUSCALLBACK lpfnCB</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>

<p>此函数可以返回这些值之一。</p>
<table>
<thead>
<tr>
<th align="left">返回码</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>S_OK</strong></td>
<td align="left">下载成功开始。</td>
</tr>
<tr>
<td align="left"><strong>E_OUTOFMEMORY</strong></td>
<td align="left">缓冲区长度无效，或内存不足，无法完成操作。</td>
</tr>
<tr>
<td align="left"><strong>INET_E_DOWNLOAD_FAILURE</strong></td>
<td align="left">指定的资源或回调接口无效。</td>
</tr>
</tbody></table>
<h1 id="字节转化"><a href="#字节转化" class="headerlink" title="字节转化"></a>字节转化</h1><p>WideCharToMultiByte 宽字节到多字节</p>
<p>将 UTF-16（宽字符）字符串映射到新字符串。新字符串不一定来自多字节字符集</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">WideCharToMultiByte</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">  [in]            UINT                               CodePage,</span></span></span><br><span class="line"><span class="params"><span class="function">  [in]            DWORD                              dwFlags,</span></span></span><br><span class="line"><span class="params"><span class="function">  [in]            _In_NLS_string_(cchWideChar)LPCWCH lpWideCharStr,  <span class="comment">//指向将被转换的unicode字符串</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in]            <span class="type">int</span>                                cchWideChar,</span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="comment">//指定由参数lpWideCharStr指向的缓冲区的字符个数。如果这个值为-1，字符串将被设定为以NULL为结束符的字符串，并且自动计算长度</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [out, optional] LPSTR                              lpMultiByteStr, <span class="comment">//指向接收被转换字符串的缓冲区</span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in]            <span class="type">int</span>                                cbMultiByte,</span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="comment">//指定由参数lpMultiByteStr指向的缓冲区最大值（用字节来计量）。若此值为零，函数返回lpMultiByteStr指向的目标缓冲区所必需的字节数，在这种情况下，lpMultiByteStr参数通常为NULL。  </span></span></span></span><br><span class="line"><span class="params"><span class="function">  [in, optional]  LPCCH                              lpDefaultChar,</span></span></span><br><span class="line"><span class="params"><span class="function">  [out, optional] LPBOOL                             lpUsedDefaultChar</span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>



<p>多字节到宽字节MultiByteToWideChar</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MultiByteToWideChar(CP_ACP, 0, filename, strlen(filename) + 1, name, sizeof(name) / sizeof(name[0]));</span><br><span class="line">//把filename字符串转换到name字符串</span><br></pre></td></tr></table></figure>






      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/re4mile/re4mile.github.io/2023/01/11/language/C/win32/%E5%B0%8F%E4%B8%93%E9%A2%98/%E7%BE%8E%E5%8C%96/language/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://s1.ax1x.com/2023/01/10/pSefBp6.jpg">
      <meta itemprop="name" content="re4mile(邓渠香)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="实践是检验真理的唯一标准">
      <meta itemprop="description" content="an ordinary people">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 实践是检验真理的唯一标准">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/re4mile.github.io/2023/01/11/language/C/win32/%E5%B0%8F%E4%B8%93%E9%A2%98/%E7%BE%8E%E5%8C%96/language/" class="post-title-link" itemprop="url">win32篇-美化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-01-11 22:41:23 / 修改时间：21:00:11" itemprop="dateCreated datePublished" datetime="2023-01-11T22:41:23+08:00">2023-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/re4mile.github.io/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="终端字体颜色"><a href="#终端字体颜色" class="headerlink" title="终端字体颜色"></a>终端字体颜色</h1><p>SetConsoleTextAttribute函数用法</p>
<h1 id="打开网站"><a href="#打开网站" class="headerlink" title="打开网站"></a>打开网站</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">fuck</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    LPCSTR mode = <span class="string">&quot;open&quot;</span>;</span><br><span class="line">    LPCSTR web = <span class="string">&quot;https://www.bilibili.com/video/BV1Mh41147yo?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&quot;</span>;</span><br><span class="line">    ShellExecuteA(<span class="literal">NULL</span>, mode, web, <span class="literal">NULL</span>, <span class="literal">NULL</span>, SW_SHOW);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/re4mile/re4mile.github.io/2023/01/11/language/C/win32/%E5%B0%8F%E4%B8%93%E9%A2%98/%E6%9C%AA%E5%85%AC%E5%BC%80API/language/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://s1.ax1x.com/2023/01/10/pSefBp6.jpg">
      <meta itemprop="name" content="re4mile(邓渠香)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="实践是检验真理的唯一标准">
      <meta itemprop="description" content="an ordinary people">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 实践是检验真理的唯一标准">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/re4mile.github.io/2023/01/11/language/C/win32/%E5%B0%8F%E4%B8%93%E9%A2%98/%E6%9C%AA%E5%85%AC%E5%BC%80API/language/" class="post-title-link" itemprop="url">未公开的win32-API说明</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-01-11 22:41:23" itemprop="dateCreated datePublished" datetime="2023-01-11T22:41:23+08:00">2023-01-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-01-06 17:42:08" itemprop="dateModified" datetime="2023-01-06T17:42:08+08:00">2023-01-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/re4mile.github.io/categories/Language/" itemprop="url" rel="index"><span itemprop="name">Language</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a target="_blank" rel="noopener" href="https://bbs.kanxue.com/thread-273199.htm">RtlpGetAssemblyStorageMapRootLocation</a></p>
<p><a target="_blank" rel="noopener" href="https://bbs.kanxue.com/thread-183181.htm">未命名</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/re4mile.github.io/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/re4mile.github.io/">1</a><span class="page-number current">2</span><a class="page-number" href="/re4mile.github.io/page/3/">3</a><a class="page-number" href="/re4mile.github.io/page/4/">4</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/re4mile.github.io/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">re4mile(邓渠香)</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/re4mile.github.io/js/comments.js"></script><script src="/re4mile.github.io/js/utils.js"></script><script src="/re4mile.github.io/js/motion.js"></script><script src="/re4mile.github.io/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/re4mile.github.io/js/third-party/search/local-search.js"></script>





  





</body>
</html>
